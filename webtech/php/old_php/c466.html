<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Accéder à une base MySQL avec PHP</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Notes de cours Apache+PHP+MySQL"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Gestion des données"
HREF="x456.html"><LINK
REL="NEXT"
TITLE="Lecture et affichage HTML des données"
HREF="x479.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Notes de cours Apache+PHP+MySQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x456.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x479.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="AEN466"
></A
>Chapter 5. Accéder à une base MySQL avec PHP</H1
><P
>&#13;Examinons maintenant comment il est possible d'exploiter ces logiciels
pour fournir aux visiteurs, à la fois un affichage des produits présents
dans notre base de données, et un moyen pour le visiteur d'ajouter un nouveau
produit à cette base. Nous commençons avec un programme PHP qui doit nous 
permettre de générer une page HTML, sur laquelle figure un tableau des
produits avec leurs prix correspondants. Nous mettrons ce code dans le
fichier <TT
CLASS="filename"
>lecture.php</TT
>.
</P
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN470"
>5.1. Conseils pour le diagnostic d'erreur</A
></H1
><P
>&#13;Du fait des langages multiples utilisés, il est parfois difficile
d'identifier simplement la source d'un dysfonctionnement lors du développement des programmes.
</P
><P
>&#13;Il est donc conseillé de manière générale, de ne pas faire l'économie des
tests d'erreurs. Par exemple, la tentative de connexion à une base devrait
prévoir l'échec de la connexion :
<PRE
CLASS="programlisting"
>&#13;@mysql_connect("$hostname", "$username", "$password")
      or die("Impossible de se connecter a la base");
</PRE
>
</P
><P
>&#13;De même, pour toutes les requêtes MySQL, je conseille de définir une
fonction comme celle-ci :
<PRE
CLASS="programlisting"
>&#13;function teste_erreur($query) {
    $error = mysql_errno();
    $error_msg = mysql_error();
    if (!empty($error_msg)) {
        echo "L'erreur $error_msg s'est produite (code=$error)";
        echo "pour la requête $query\n";
    }
}
</PRE
>
et de l'appeler systématiquement après une requête <B
CLASS="command"
>mysql_query($q)</B
> de façon à ne pas chercher trop longtemps la cause de l'erreur :

<PRE
CLASS="programlisting"
>&#13;   $q = " ..... "
   mysql_query($q);
   teste_erreur($q);
</PRE
>
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x456.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x479.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Gestion des données</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Lecture et affichage HTML des données</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>