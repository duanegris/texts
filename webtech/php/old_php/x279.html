<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Les fonctions</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Notes de cours Apache+PHP+MySQL"
HREF="index.html"><LINK
REL="UP"
TITLE="PHP"
HREF="c82.html"><LINK
REL="PREVIOUS"
TITLE="Les tableaux"
HREF="x237.html"><LINK
REL="NEXT"
TITLE="SQL"
HREF="c298.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Notes de cours Apache+PHP+MySQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x237.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. PHP</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c298.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN279"
>3.3. Les fonctions</A
></H1
><P
>&#13;Les fonctions permettent de définir un traitement retournant 0 ou 1 résultat.
On donne une fois sa définition, et on peut ensuite <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>appeler</I
></SPAN
>
cette fonction autant de fois qu'on le désire dans d'autres parties du programme,
éventuellement avec des paramètres différents. 
</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN283"
>3.3.1. Définition d'une fonction</A
></H2
><P
>&#13;Une fonction est définie par le mot clé <FONT
COLOR="RED"
>function</FONT
>.
Le résultat retourné (optionnel) est celui donné par <FONT
COLOR="RED"
>return</FONT
>.
<PRE
CLASS="programlisting"
>&#13;&#60;php?
function prix_reduit( $prix, $reduction ) {
   $res = $prix * (1-$reduc);
   return( $res);
}
?&#62;
</PRE
>
</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN289"
>3.3.2. Appel d'une fonction</A
></H2
><P
>&#13;Une fois définie, la fonction peut être appelée, c-a-d exécutée 
(avec des paramètres réels si la définition attend des paramètres).
<PRE
CLASS="programlisting"
>&#13;&#60;php?
   ...
   $prix_initial=100;
   $reduc=0.20;
   $prix_final1 = prix_reduit( $prix_initial, $reduc );
   $prix_final2 = prix_reduit( 100 , 0.20 );
   ...
?&#62;
</PRE
>
Les deux appels à <FONT
COLOR="RED"
>prix_reduit</FONT
> ci-dessus donnent le même résultat.
</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN294"
>3.3.3. Exemple de fonction</A
></H2
><P
>&#13;On se servira avec avantage des fonctions pour éviter les traitements répétitifs.
Par exemple, on pourra écrire une fonction qui fait une requête SQL passée en paramètre,
et qui accepte un paramètre supplémentaire (debug) quand on veut plus d'information
sur les erreurs.

<PRE
CLASS="programlisting"
>&#13;function requete($requet, $debug=0) {
      if($debug==0){
            $query = mysql_query($requet);
            if($query == 0)
                  echo "Problème d\'accès à la base de données ou erreur de syntaxe dans la requête.";
            return $query;
      }
      // mode debug
      else{
            $query = mysql_query($requet);
            echo "$requet";
            if($query == 0) {
                  echo "Problème d\'accès à la base de données ou erreur de syntaxe dans la requête.";
                  echo "Erreur #'. mysql_errno()";
                  echo "Description : ' . mysql_error()";
            }
            else
                  echo "Pas d\'erreur dans la requête.";
            return $query;
      }
}
</PRE
>
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x237.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c298.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Les tableaux</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c82.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>SQL</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>