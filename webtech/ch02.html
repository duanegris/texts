<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 2. Apache, PHP et MySQL</title><link rel="stylesheet" href="duaneg-docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.71.1"><link rel="start" href="index.html" title="Notes de cours Apache+PHP+MySQL"><link rel="up" href="index.html" title="Notes de cours Apache+PHP+MySQL"><link rel="prev" href="ch01.html" title="Chapter 1. Introduction"><link rel="next" href="ch03.html" title="Chapter 3. PHP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. Apache, PHP et MySQL</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch03.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="id36115903"></a>Chapter 2. Apache, PHP et MySQL</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch02.html#id36115909">Les trois logiciels en bref</a></span></dt><dt><span class="sect1"><a href="ch02.html#id36116018">Architecture 3-tiers</a></span></dt><dt><span class="sect1"><a href="ch02.html#id36116122">Installation Linux</a></span></dt><dt><span class="sect1"><a href="ch02.html#id36116207">Installation Windows</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36115909"></a>Les trois logiciels en bref</h2></div></div></div><p>
Ces trois noms désignent des logiciels, installés sur le site
web (machine serveur), ayant chacun des rôles différents. 
Examinons le rôle de chacun d'entre eux.

</p><div class="itemizedlist"><ul type="disc"><li><p>
<a href="http://www.apache.org" target="_top">
Apache
</a>
est le <span class="emphasis"><em>serveur web</em></span>. 
Son rôle est d'écouter les requêtes émises par les navigateurs (qui demandent
des pages web), de chercher la page demandée et de la renvoyer.
</p></li><li><p>
<a href="http://www.php.net" target="_top">
PHP
</a>
est un <span class="emphasis"><em>langage de script</em></span>. 
Il permet, de décrire dans une page web, un affichage dynamique d'information,
c'est-à-dire que le texte affiché peut dépendre de variables. 
Nous avons par exemple la possibilité d'afficher dans une page renvoyée au navigateur, la date du jour.
Les instructions PHP sont généralement contenues dans des fichiers 
d'extension php. Ces fichiers peuvent contenir du HTML, entremêlé avec
le code PHP. Quand un navigateur demande un tel fichier, le serveur Apache
exécute les instructions PHP, qui produisent une page HTML.
Une fois la page HTML générée, le serveur la renvoie au navigateur, qui
ne voit qu'une page HTML.
</p></li><li><p>
<a href="http://www.mysql.com" target="_top">
MySQL
</a>
est un <span class="emphasis"><em>système de gestion de base de données</em></span>. 
Son rôle est de stocker les données, sous forme de tables, et de permettre
la manipulation de ces données à travers le langage de requête SQL.
Un exemple de requête peut être par exemple (exprimé en francais) 
: “<span class="quote">Lister les adresses des clients (à partir de la table client) qui
    ont acheté cette année pour plus de 1000 euros (à partir de la table facturation)</span>”. 
En SQL, cette requête s'écrirait par exemple de la manière suivante : 
<span><strong class="command">select (nom,adresse) from (client,facturation) where (client.numero = facturation.numero and facturation.total&gt;1000)</strong></span> 
où le champ <span class="emphasis"><em>numero</em></span> est la clé primaire de chacune des 
tables, et représente le numéro de client.
</p><p>
PHP est capable de passer à MySQL de telles requêtes à travers les fonctions
de préfixe <code class="function">mysql_</code> (PHP possède également des 
fonctions pour dialoguer avec d'autres systèmes de gestion de base de données).
C'est une raison du succès du couple PHP+MySQL dans la mise en place de
sites webs.
</p></li></ul></div><p>
</p><p>
L'utilisation des trois logiciels n'est nécessaire que lorsqu'on
veut afficher au visiteur des informations provenant de la base
de données. Cependant, cette configuration est fréquement utilisée
car elle correspond à beaucoup de besoins.
Un magasin voulant afficher à ses clients la liste de ses produits 
en stock, un forum de discussions permettant à des internautes
de lire, et rechercher des messages, sont autant d'exemples
d'application nécessitant la manipulation (enregistrement, manipulation,
affichage) de données à travers le réseau.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36116018"></a>Architecture 3-tiers</h2></div></div></div><p>
La configuration que l'on met ici en place est souvent nommée "3-tiers" (3-tier en anglais) car
on peut décomposer fonctionnellement notre application en 3 couches distinctes.
</p><div class="itemizedlist"><ul type="disc"><li><p>
   <span class="emphasis"><em>couche présentation:</em></span>
   c'est la partie de l'application visible par les utilisateurs (on parle d'interface utilisateur). 
   Dans notre cas, elle se présentera sous la forme de pages HTML, composée de formulaires, bouttons, etc. 
   Un exemple concret peut être l'interface de recherche de vols sur un site de réservation d'une compagnie aérienne: 
   la couche de présentation définit le formulaire de recherche et la présentation des résultats de la recherche.
</p><div class="figure"><a name="flightsearch_form"></a><p class="title"><b>Figure 2.1. Exemple d'interface pour une recherche de vols</b></p><div class="figure-contents"><div class="screenshot"><div><img src="fligthsearch_form_shot.png" alt="Exemple d'interface pour une recherche de vols"></div></div></div></div><p><br class="figure-break">


   </p></li><li><p>
    <span class="emphasis"><em>couche métier:</em></span>
    c'est la "logique" de l'application elle-même, c'est-à-dire les algorithmes implémentés pour remplir les fonctions spécifiées.
    Dans l'exemple de la fonction de recherche de vols, l'application prendra les données saisies par l'utilisateur dans le formulaire,
    pourra vérifier la cohérence des informations demandées, mettre cette requête dans un format adéquat, et transmettre la requête
    au gestionnaire des données (couche accès aux données). 
    Si l'utilisateur attend des données en résultat, l'application procède en général à un traitement avant de les passer
    à la couche présentation.</p></li><li><p>
    <span class="emphasis"><em>couche accès aux données:</em></span> c'est la partie qui gère les données. 
La façon dont elle organise, manipule, stocke, etc, les données est transparente aux applications ou utilsiateurs externes,
toutes ces opérations étant internes à la couche d'accès aux données.
Cette couche est souvent implantée avec un sytème de gestion de base de données. 
L'interface proposée est souvent SQL.
</p></li></ul></div><p>
Remarquons bien que le choix de Apache+PHP+MySQL n'en est que partie une multitude d'autres possibles.
(Par exemple Java/RMI+Base de données).


</p><div class="figure"><a name="fg1"></a><p class="title"><b>Figure 2.2. Architecture 3-tiers avec Apache+PHP+MySQL</b></p><div class="figure-contents"><div class="screenshot"><div><img src="webserver-3tier.png" alt="Architecture 3-tiers avec Apache+PHP+MySQL"></div></div></div></div><p><br class="figure-break">

</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36116122"></a>Installation Linux</h2></div></div></div><p>
L'installation sur un système Linux de ces trois composants est 
plutôt simple, étant donné que ces logiciels sont généralement
disponibles d'office dans les distributions. 

De plus, on vérifiera que la configuration de PHP permet bien
d'accéder aux fonctions MySQL : 
visualiser le fichier <code class="filename">/etc/php.ini</code>
et vérifier que la ligne :
</p><pre class="programlisting">
extension = mysql.so
</pre><p>
est décommentée (il ne doit pas y avoir de points virgule en début de ligne).
</p><p>
Bien sûr, il faut aussi vérifier que les services Apache et MySQL sont
actifs. Dans le doute démarrez les (en tant que rootou en sudo).
On peut utiliser la commande <code class="filename">apachectl</code>,
souvent placée dans <code class="filename">/usr/sbin/</code>.
Cette commande propose comme option <code class="filename">start, restart, graceful, graceful-stop,
ou stop</code>, et est toujours disponible avec Apache. 

Pour lancer:
</p><pre class="screen">
  <code class="prompt">bash # </code><strong class="userinput"><code>apachectl start</code></strong>
</pre><p>
</p><p>
Alternativement, on peut utiliser les scripts de démarrage enrobant
cette commande. Ils varient en fonction de la distribution. 
Sur Mandriva/Redhat/Fedora, on peut utiliser:
</p><pre class="screen">
  <code class="prompt">bash # </code><strong class="userinput"><code>service httpd start</code></strong>
  Starting httpd:                                            [  OK  ]
  <code class="prompt">bash # </code><strong class="userinput"><code>service mysql start</code></strong>
  Starting mysqld daemon with databases from /var/lib/mysql
  <code class="prompt">bash # </code>
</pre><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36116207"></a>Installation Windows</h2></div></div></div><p>
L'installation sur les systèmes Windows de ces trois logiciels est aussi très populaire.
A tel point que les trois logiciels sont parfois proposés en un seul paquet. Deux
projets:
<a href="http://www.easyphp.org/" target="_top">
EasyPHP
</a>
et
<a href="http://www.wampserver.com/" target="_top">
WAMP
</a>
livrent une installation "clés-en-mains" de Apache, PHP, MySQL et de phpMyAdmin en prime.
La procédure d'installation de ce paquet est très simple. Reportez vous à la section téléchargement 
et installation de ce site ; vous devriez pouvoir avoir un environnement fonctionnel très rapidement.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. Introduction </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 3. PHP</td></tr></table></div></body></html>
