<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 5. SQL</title><link rel="stylesheet" href="duaneg-docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.71.1"><link rel="start" href="index.html" title="Notes de cours Apache+PHP+MySQL"><link rel="up" href="index.html" title="Notes de cours Apache+PHP+MySQL"><link rel="prev" href="ch04.html" title="Chapter 4. Passage de valeurs d'une page à l'autre"><link rel="next" href="ch06.html" title="Chapter 6. Accéder à une base MySQL avec PHP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. SQL</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="id36117188"></a>Chapter 5. SQL</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch05.html#id36117214">Manipulation des données</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch05.html#id36117228">Lire des données dans la base : SELECT</a></span></dt><dt><span class="sect2"><a href="ch05.html#id36117318">Exemples SELECT</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch05.html#id36117716">Gestion des données</a></span></dt></dl></div><p>
SQL (Structured Query Language) est un langage de définition, de contrôle et de manipulation de données 
pour les bases de données relationnelles. 
Le modèle relationnel a été inventé par E.F. Codd (Directeur de recherche du centre IBM de San José) en 1970,
 et est devenu aujourd'hui le standart en terme de langage pour les bases de données.
 De fait, c'est le langage utilisé par le système de gestion de base de données
 MySQL.
</p><p>
Nous ne donnons ici qu'un aperçu du langage SQL, permettant de comprendre
les grands principes du langage et de réaliser des requêtes élémentaires.
Pour plus de détails, on pourra se reporter à la documentation
<a href="http://www.commentcamarche.net/sql/sqlsel.php3" target="_top">
comment ça marche.
</a>
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36117214"></a>Manipulation des données</h2></div></div></div><p>
SQL est à la fois un langage de manipulation de données et un langage de définition de données. 
Toutefois, la définition de données est l'oeuvre de l'administrateur de la base de données, c'est pourquoi la plupart des personnes qui utilisent le langage SQL ne se servent que du langage de manipulation de données, permettant de sélectionner les données qui les intéresse. 
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id36117228"></a>Lire des données dans la base : SELECT</h3></div></div></div><p>
     La principale commande du langage de manipulation de données est la 
     commande <code class="function">SELECT</code>, dont la syntaxe est la suivante :  

     </p><pre class="programlisting">
		 SELECT [ALL] | [DISTINCT] &lt;liste des noms de colonnes&gt; 
		              | * FROM &lt;Liste des tables&gt; [WHERE &lt;condition logique&gt;] 
     </pre><p>

</p><p>
</p><div class="itemizedlist"><ul type="disc"><li><p> 
     L'option ALL (option par défaut) permet de sélectionner 
     l'ensemble des lignes satisfaisant à la condition logique
     </p></li><li><p>
     L'option DISTINCT permet de ne conserver que des 
     lignes distinctes, en éliminant les doublons 
     </p></li><li><p>                         
     La liste des noms de colonnes indique la liste des 
     colonnes choisies, séparées par des virgules.
     </p></li><li><p>
     Lorsque l'on désire sélectionner l'ensemble des colonnes 
     d'une table il n'est pas nécessaire de saisir la liste 
     exhaustive de ses colonnes : l'option * permet de réaliser cette tâche 
     </p></li><li><p>
     La liste des tables indique l'ensemble des tables 
     (séparées par des virgules) sur lesquelles on opère
     </p></li><li><p>
     La condition logique permet d'exprimer des 
     qualifications complexes à l'aide d'opérateurs 
     logiques et de comparateurs arithmétiques 
     </p></li></ul></div><p>  
</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>
        Le langage SQL n'est pas sensible à la casse 
	  (en anglais case sensitive), cela signifie que l'on peut aussi 
	  bien écrire les instructions en minuscules qu'en majuscule. 
	  Toutefois, cette insensibilité à la casse n'est que partielle 
	  dans la mesure où la différenciation entre minuscules et 
	  majuscules existe au niveau des identificateurs d'objets. 
</p></td></tr></table></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id36117318"></a>Exemples SELECT</h3></div></div></div><p>
        Voyons quelques unes des possibilités de la 
	  commande <code class="function">SELECT</code>. 
        Supposons l'existence de la table suivante, recensant des 
	  lecteurs de CD
        vendus d'occasion. 
	  Cette table s'appelle <code class="varname">lecteurs</code>.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>ref</th><th>marque</th><th>modele</th><th>annee</th><th>prix</th></tr></thead><tbody><tr><td>1</td><td>Pioneer</td><td>CD-120</td><td>1998</td><td>700</td></tr><tr><td>2</td><td>Sony</td><td>PL135</td><td>1999</td><td>890</td></tr><tr><td>3</td><td>Pioneer</td><td>CD-140</td><td>1997</td><td>950</td></tr><tr><td>4</td><td>Philips</td><td>PH340</td><td>2000</td><td>1050</td></tr><tr><td>5</td><td>Technics</td><td>T600</td><td>1998</td><td>890</td></tr></tbody></table></div><p>
Nous pouvons lister l'ensemble de la table par 
</p><pre class="programlisting">
SELECT * FROM lecteurs
</pre><p>
qui nous donne tous les enregistrements de la table (cinq lignes).
Maintenant, nous pouvons restreindre la liste aux lecteurs ayant un prix
inférieur ou égal à 1000F :
</p><pre class="programlisting">
SELECT * FROM lecteurs WHERE prix &lt;= 1000
</pre><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>ref</th><th>marque</th><th>modele</th><th>annee</th><th>prix</th></tr></thead><tbody><tr><td>1</td><td>Pioneer</td><td>CD-120</td><td>1998</td><td>700</td></tr><tr><td>2</td><td>Sony</td><td>PL135</td><td>1999</td><td>890</td></tr><tr><td>3</td><td>Pioneer</td><td>CD-140</td><td>1997</td><td>950</td></tr><tr><td>5</td><td>Technics</td><td>T600</td><td>1998</td><td>890</td></tr></tbody></table></div><p> 
On peut également combiner plusieurs critères.
Par exemple, les lecteurs Pioneer à moins de 1000F.
</p><pre class="programlisting">
SELECT * FROM lecteurs WHERE prix &lt; 1000 and marque='Pioneer'
</pre><p>

On peut aussi vouloir sortir cette liste après l'avoir trié.
La requête SELECT permet cela directement. 
Pour obtenir la liste des lecteurs classés par ordre de prix,
nous demandons :
</p><pre class="programlisting">
SELECT * FROM lecteurs ORDER BY prix 
</pre><p>
</p><p>
Quand on ne précise pas si le tri est croissant ou décroissant,
c'est un tri décroissant qui est opéré. 
On peut préciser de quel type est le tri à l'aide des mots clés
<code class="varname">ASC</code> (croissant) ou <code class="varname">DESC</code> (décroissant).
</p><p>
On peut aussi utiliser plusieurs critères de tri. 
Il suffit alors de séparer les noms des colonnes utilisées pour le
tri par des virgules. L'ordre dans lequel apparaissent les 
noms de colonnes indique quels critères sont prioritaires.
Par exemple,

</p><pre class="programlisting">
SELECT * FROM lecteurs ORDER BY prix,annee 
</pre><p>

donne la liste suivante, où quand plusieurs prix sont identiques,
le second critère (l'année) est utilisé pour déterminer l'ordre.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>ref</th><th>marque</th><th>modele</th><th>annee</th><th>prix</th></tr></thead><tbody><tr><td>1</td><td>Pioneer</td><td>CD-120</td><td>1998</td><td>700</td></tr><tr><td>5</td><td>Technics</td><td>T600</td><td>1998</td><td>890</td></tr><tr><td>2</td><td>Sony</td><td>PL135</td><td>1999</td><td>890</td></tr><tr><td>3</td><td>Pioneer</td><td>CD-140</td><td>1997</td><td>950</td></tr><tr><td>4</td><td>Philips</td><td>PH340</td><td>2000</td><td>1050</td></tr></tbody></table></div><p> 


</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id36117716"></a>Gestion des données</h2></div></div></div><p>
      La gestion des données comprend la création des bases et des tables,
	ainsi que la définition des champs des tables et leurs types.
	Toutes ces opérations peuvent se faire à l'aide de commandes
	MySQL.
</p><p>
	Cependant, pour écourter la présentation, nous recommandons l'utilisation
	de l'outil 
	<a href="http://www.phpwizard.net/projects/phpMyAdmin/" target="_top">phpMyAdmin
	</a>.
	Celui-ci permet de créer la base de donnée et de l'administrer à travers
	une interface web (elle même écrite en PHP d'ailleurs).
	Par conséquent, une administration à distance ide la base devient
	aussi simple que si on avait accès au poste où se trouve la base.
	</p><div class="figure"><a name="phpmyadmin-fig"></a><p class="title"><b>Figure 5.1. L'interface d'administration phpMyAdmin</b></p><div class="figure-contents"><div class="screenshot"><div><img src="phpmyadmin.jpg" alt="L'interface d'administration phpMyAdmin"></div></div></div></div><p><br class="figure-break">

</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. Passage de valeurs d'une page à l'autre </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 6. Accéder à une base MySQL avec PHP</td></tr></table></div></body></html>
