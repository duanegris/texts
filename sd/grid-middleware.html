<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Les Grilles Informatiques</title>
<!-- metadata -->
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20050128" />
<meta name="author" content="S. Genaud" />
<meta name="company" content="Université Louis Pasteur" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- embedded styles -->
<style type="text/css" media="all">
.imgcon {width: 525px; margin: 0 auto; padding: 0; text-align: center;}
#anim {width: 270px; height: 320px; position: relative; margin-top: 0.5em;}
#anim img {position: absolute; top: 42px; left: 24px;}
img#me01 {top: 0; left: 0;}
img#me02 {left: 23px;}
img#me04 {top: 44px;}
img#me05 {top: 43px;left: 36px;}

.tableauMedia
{
  	margin: 0px 0px 20px 30px;
	padding: 5px;
}
.legende {
	font-family: Verdana, Arial, helvetica, sans-serif;
	font-size: 10px;
	line-height: 15px;
	padding: 3px 0 0 0;
}
.legendeTitre
{
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 11px;
	line-height: 16px;
	color: #333;
	font-weight: bold;
}


.important { color : red; }

table.list { border-spacing : 3px; 
             margin-left: auto; 
             margin-right : auto; /* pour centrer la table */ 
           }
tr.list    { background-color : #eee59a; font : fixed; }
th.list    { background-color : #c2ddeb; }
td.list    { background-color : #eee59a; margin : 3px; font-family : courier ; font-size : 12pt;}


.listing pre {
           padding: 0; margin: 0;
           background-color : #c2ddeb;
           font-size : smaller;
           border-bottom: 1px solid #000;
           border-top   : 1px solid #000;
           width: 100%; position: relative;
}
.listing-normal pre {
           padding: 0; margin: 0;
           background-color : #c2ddeb;
           border-bottom: 1px solid #000;
           border-top   : 1px solid #000;
           width: 100%; position: relative;
}
</style>


<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>
</head>


<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<div id="footer">
<h1>Novembre &#8226; 2005</h1>
<h2>Les Grilles Informatiques</h2>
</h2>
</div>
</div>

<div class="presentation">
	  
	  
<div class="slide">
        <h1>Les Grilles informatiques</h1>
	  <h2>Partie 2: middleware</h2>
<h4><a href="http://icps.u-strasbg.fr/~genaud">Stéphane Genaud</a></h4>
</div>


<div class="slide">
<h1>Middleware pour les grilles</h1>

<p>
Les Grilles sont construites sur une base logicielle de type <em>Middleware</em> (ou intergiciel),
i.e. interface entre les OS et les applications.
</p>
<p>
Les intergiciels pour Grilles permettent de déployer une large classe d'applications
distribuées (&ne; applications dédiées comme SETI@Home) et proposent un modèle de 
programmation.
</p>
<p>
Quelques projets caractéristiques :
</p>
<ul>
	  <li><b>Globus</b></li>
	  <li>Condor</li>
	  <li>Diet</li>
	  <li>ExtremWeb</li>
</ul>
</div>

<div class="slide">
<h1>Middleware pour les grilles</h1>
<p>
Les intergiciels pour grilles fournissent souvent des fonctionnalités supplémentaires: 
des <em>services</em> répondant aux besoins des tuilisateurs de grilles.
</p>
<ul>
<li> identification des utilisateurs, 
<li> découverte des ressources ,
<li> interface uniforme de requête,
<li> localisation des données.
</ul>
</div>


<!-- _______________________________ identification  _____________________________ -->
<div class="slide">
<h1>Identification</h1>
<p>

</p>
</div>



<div class="slide">
<h1>OGSA</h1>
<ul>
   <li>Le <a href="http://www.ggf.org"><i>Global Grid Forum</i></a> tente
       de définir les éléments fondamentaux d'une grille (OGSI et OGSA).</li>
   <li>Les participants au forum représentent les intérêts les plus larges.</li>
   <li>L'approche retenue est celle des services : des services de base plus ceux offerts localement.</li>
   <li>Globus suit les recommandations du GGF.</li>
</ul>

</div>

<div class="slide">
	  <h1>OGSA</h1>
	  A base de <i>Web service</i>. 
	  Un web service :
	  <ul>
		    <li>est décrit à travers WSDL,</li>
	          <li>est publié dans un annuaire,</li>	    
		    <li>est découvrable,</li>	
		    <li>et est invocable par un client.</li>
	  </ul>    
	  
<p>
OGSA propose d'utiliser les recommandations existantes du W3C : XML, SOAP, WSDL, UDDI, ....
</p>
</div>

<!--
<div class="slide">
<h1>OGSA>/h1>
		    
	  serviceData: les propriétés d'un service qu'on peut invoquer
	    
</div>
-->

<!-- Exemple requete -->
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-1.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-2.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-3.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-4.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-5.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-6.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-7.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-8.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-9.png" alt="Ex. requete">
</div>
<div class="slide">
<h1>Exemple de Service</h1>
<img src="grid-img/db-query-10.png" alt="Ex. requete">
</div>


<!-- _______________________________ DIET _____________________________ -->

<div class="slide">
<h1>DIET</h1>

<p>
DIET est une plate-forme hiérarchique développée à l'INRIA. 
Elle est orientée <em>Application Service Provider</em> (ASP) et son modèle de
programmation est Grid-RPC.
Elle permet à des clients de soumettre une requête prise en charge par un serveur
de la plate-forme.
</p>
<p>
Cet intergiciel peut être rangé dans la catégorie des <em>Network Enabled  Servers</em> (NES).
(<a href="http://ninf.apgrid.org/">Ninf</a>, <a href="http://icl.cs.utk.edu/netsolve/">Netsolve</a>, ...)
</p>
<p>
Problématiques:
</p>
<ul>
<li>Equilibrage de charge: éviter la saturation de requêtes =&gt; architecture hiérarchique.</li>
<li>Tolérance aux fautes: coupure d'une composante du réseau, non-réponse =&gt; architecture redondante.</li>
<li>Ordonnancement: où et quand exécuter la tâche. Ex: Avec l'objectif de minimiser le temps de réponse d'une requête, de maximiser l'utilisation des serveurs, ...
</ul>

</div>


<div class="slide">
<h1>DIET</h1>

<img style="float:right" src="grid-img/dietarchi.png" alt="DIET archi"> 
<ul>
<li>Master Agent (MA): reçoit des requêtes des clients. 
Les requêtes doivent mentionner des problèmes DIET référencés (listés sur une page web).
Le MA recense les capacités des serveurs et choisit le meilleur pour le problème.
Il envoie ensuite au client l'adresse du serveur sélectionné. 
</li>
<li>
Leader Agent (LA): diffuse les requêtes en cours vers les serveurs. 
Chaque LA remonte au MA les serveurs capables de résoudre le problème et le 
temps estimé du calcul sur chacun.
</li>
<li>
Server Daemon (SeD) : gestionnaire du serveur de calcul (éventuellement cluster).
Connait 
<ul>
<li>les données disponibles,</li>
<li>la liste des problèmes implantés sur le serveur,</li>
<li>la charge CPU, la mémoire disponible, etc.</li>
</ul>
Il estime le temps de traitement d'un problème (CPU + déplacement des donnnées)
à l'aide d'un module d'estimation (FAST).
</li>
</ul>
</div>


<!-- ____________________________ ProActive ______________________________ -->

<div class="slide">
<h1>ProActive</h1>

<p>
<a href="http://www-sop.inria.fr/oasis/ProActive/">ProActive</a> est un projet INRIA, Nice.<br/>
<img style="float:right" src="grid-img/pro-active2.gif" alt="ProActive Logo" width="320"/>
Objectifs: développer une librarie permettant le développement d'applications 
sur Grille.
</p>
<p>
Caractéristiques:
</p>
<ul>
	  <li>Middleware basé sur le modèle des composants: description du déploiement.</li>
	  <li>Java est choisi pour amoindrir les difficultés liées à l'hétérogénité.</li>
	  <li>Le modèle de programmation est de type client-server avec des 
	  communications sophistiquées. </li> 
</ul>
</div>


<div class="slide">
<h1>ProActive</h1>
<p>
Idée forte: accès transparent aux objets pour le programmeur.<br/>
<img style="margin-left:auto;margin-right:auto;text-align:center;" 
     src="grid-img/proActiveModelColor.gif" 
     alt="ProActive iobjects" width="500"/>
<br/>
</p>
<ul>
	  <li>La création distante d'objet est rendue très simple (une instruction,
            plus une pour le placement).</li>
	  <li>L'appel de méthodes est identique quelque soit l'emplacement de l'objet 
	  (proxy en cas d'objet distant).</li>
	  <li>La synchronisation est implicite (évaluation par nécessité),
           que se soit des opérations sur groupes ou objets simples.</li>
	  <li>La <span class="important">migration</span> est partie intégrante.</li>
</ul>
</div>


<!-- ____________________________ ProActive  active objects______________________________ -->
<div class="slide">
<h1>ProActive - objets </h1>
<p>
Les <span class="important">objets actifs</span> implémentent les accès à distance de
manière transparente.<br/>
<br/>
<img style="float:left;padding-right=20px;" 
     src="grid-img/activeObjectMethodCall.gif" 
     alt="active objects" width="500"/>
<br/>
<pre>
  ClasseC {
   ...
   public float calcul(...);
   ...
  }
  ...
  A.calcul(); // calcul peut être 
              // exécuté à distance
</pre>
</p>

<ul>
	  <li>Localement, un proxy est créé. Il gère un espace appelé <em>futur</em> où sera
	  placée le résultat en retour.</li>
	  <li>Dans la machine distante, une instance <em>body</em> est créée. 
	  Elle gère les stubs, et evenutellement la délégation en cas de migration.</li>
</ul>
</div>

<!-- ____________________________ ProActive active objects______________________________ -->
<div class="slide">
<h1>ProActive - objets - création</h1>
<p>
Création d'un objet actif avec <tt>ProActive.newactive()</tt>.
</p>
<div class="listing">
<pre>
  Classe a;
  Object[] params = new Object[] { new Integer (26), "astring" };
  try {
    a = (Classe) ProActive.newActive("example.Classe", params);
  } catch (ActiveObjectCreationException e) {
    e.printStackTrace();
  }
</pre>
</div>
<p>
L'appel à une méthode de <tt>a</tt> provoque la copie par valeur
des paramètres et la requête est mise dans la file d'attente de <tt>a</tt>. 
</p>
<p>
Ici, <tt>a</tt> est créé dans la JVM d'origine (locale).
</p>


</div>

<!-- ____________________________ ProActive active objects______________________________ -->
<div class="slide">
<h1>ProActive - objets - création</h1>
<p>
Création d'un objet actif distant.
</p>
<div class="listing">
<pre>
  a = (Classe) ProActive.newActive("example.Classe", 
                    params, "rmi://pluto.inria.fr/aNode");

  //ou 

  Node node = NodeFactory.getNode("rmi://pluto.inria.fr/aNode");
  a = (Classe) ProActive.newActive("example.Classe", params, node);
</pre>
</div>
</p>

<p>
Note: on peut "rendre actif" un objet ordinaire après sa création avec 
<tt>turnActive()</tt>.
</p>

<div class="listing">
<pre>
    Classe a = new Classe (26, "astring");
     ....
    a = (Classe) ProActive.turnActive(a,node);
</pre>
</div>


<p>
<br/>
 <b>Placement des objets actifs</b> sur un
  <tt>Node</tt>, élément d'un <tt>VirtualNode</tt>.
  Un descripteur de déploiement donne :
  <ul>
    <li>composition des VirtualNodes,</li>
    <li>la distribution des nodes sur les JVMs,</li>
    <li>la manière de démarrer le process.</li>
  </ul>
</p>



</div>

<!-- _______________________ objects mapping (nodes)______________________________ -->

<div class="slide">
<h1>ProActive - déploiement</h1>
  

<p>
Créé un noeud appelé <tt>Dispatcher</tt> qui sera placé dans la JVM <tt>jvm1</tt>.
</p>


<div class="listing">
<pre>
&lt;ProActiveDescriptor 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="DescriptorSchema.xsd"&gt;
&lt;componentDefinition&gt;
  &lt;virtualNodesDefinition&gt;
    &lt;virtualNode name="<b>Dispatcher</b>"/&gt;    
  &lt;/virtualNodesDefinition&gt;
&lt;componentDefinition/&gt;
&lt;deployment&gt;
    &lt;mapping&gt;
      &lt;map virtualNode="<b>Dispatcher</b>"&gt;
      &lt;jvmSet&gt;
         &lt;vmName value="<b>jvm1</b>"/&gt;
      &lt;/jvmSet&gt;
      &lt;/map&gt;
    &lt;/mapping&gt;
    &lt;jvm name="<b>jvm1</b>"&gt; 
      &lt;creation&gt;
        &lt;processReference refid="<b>jvmProcess</b>"/&gt; <span style="color:firebrick">(décrit dans la partie infrastructure)</span>
        &lt;/creation&gt;
    &lt;/jvm&gt;    
&lt;/deployment&gt;
&lt;/ProActiveDescriptor&gt;	
</pre>
</div>


</div>


<!-- ____________________________  ______________________________ -->
<div class="slide">
<h1>ProActive - déploiement</h1>
<p>
Extrait de code typique:
</p>
<div class="listing">
<pre>
ProActiveDescriptor pad = ProActive.getProactiveDescriptor(String xmlFile);

//--------- Returns a ProActiveDescriptor object from the xml file
VirtualNode dispatcher = pad.getVirtualNode("Dispatcher");

//-------- Returns the VirtualNode Dispatcher described in the xml file as a java object 
dispatcher.activate();

// -------- Activates the VirtualNode
Node node = dispatcher.getNode();

</pre>
</div>


<p>
Un <i>VirtualNode</i> peut regrouper plusieurs JVM.
</p>
<p>
Une JVM peut héberger, un ou plusieurs <i>Nodes</i>. <br/>
Dans le cas d'un cluster, on associe généralement <i>n</i> JVM avec <i>n</i>Nodes. 
</p>

<p>
Le détail des possibilités de configuration: 
[ <a href="http://www-sop.inria.fr/oasis/ProActive/doc/api/org/objectweb/proactive/doc-files/Descriptor.html">html</a> ].
</p>

</div>

<!-- ____________________________ ProActive groupes ______________________________ -->
<div class="slide">
<h1>ProActive - groupes</h1>
<p>
Les méthodes les plus utilisées pour la gestion de groupe sont fournies par 
la classe
<a 
href="http://www-sop.inria.fr/oasis/ProActive/doc/api/org/objectweb/proactive/core/group/ProActiveGroup.html">ProActiveGroup</a>.
Ces groupes sont typés (éléments de même classe ou plus abstraits).
</p>
<p>Par exemple, pour la <b>création</b> d'un groupe:
</p>
<div class="listing">
<pre>
  Classe ag = (Classe) ProActiveGroup.newGroup("Classe", params[], 
                   {rmi://globus1.inria.fr/Node1,
                    rmi://globus2.inria.fr/Node2});
</pre>
</div>

</div>

<!-- ____________________________ ProActive groupes ______________________________ -->
<div class="slide">
<h1>ProActive - groupes</h1>
<p>
Les groupes permettent de déclencher des 
<span class="important">appels de méthode en parallèle</span>.

</p>
<p>
Soit la classe <tt>C</tt>:
</p>
<div class="listing">
<pre>
  class C {
     R calcul(P p) { ... }  
     ...
  }
</pre>
</div>

<p>
On peut former un groupe G d'objets actifs de type <tt>C</tt>,
et invoquer la méthode <tt>calcul()</tt> sur chaque élément
du groupe (map).
</p>
<div class="listing">
<pre>
  C groupeDeC  = (G) ProActiveGroup.newGroup("C",params,nodes);
  P p; 
  R r = groupeDeC.calcul( p );
</pre>
</div>

<p>
Autant d'appels <span class="important">asynchrones</span> 
<tt>calcul()</tt> sont déclenchés qu'il n'y a
d'éléments dans <tt>groupeDeC</tt>.
</p>
</div>


<!-- ____________________________ ProActive groupes ______________________________ -->
<div class="slide">
<h1>ProActive - communications collectives</h1>

<p>
Les groupes permettent les
<span class="important">communications collectives</span>.
</p>

<div class="listing">
<pre>
  C groupeDeC  = (G) ProActiveGroup.newGroup("C",{o1,o2,o3},nodes);
  R r = groupeDeC.calcul( p );

  r.uneMethodeDeR();
</pre>
</div>
<p>
Les 3 appels à <tt>uneMethodeDeR()</tt> seront effectués au fur et à mesure
que <tt>r</tt> se remplit.
</p>
<p>
On peut exprimer une synchronisation totale:
<pre>
ProActive.waitForAll(r);
</pre>
ou parrtielle:
<pre>
R tmp = ProActive.getOne( r );
tmp.uneMethodeDeR();
</pre>
</p>

</div>

<!-- ____________________________ ProActive groupes ______________________________ -->
<div class="slide">
<h1>ProActive - synchros </h1>


<table style="font-size:smaller;font-family:courrier" border="0">
<tr>
<td>
static&nbsp;void</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitAll(java.lang.Object)">waitAll</A></B>(java.lang.Object&nbsp;o)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
attend que tous les résultats soient arrivés.</TD>
</TR>
<tr>
<td>
static&nbsp;java.lang.Object</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitAndGetOne(java.lang.Object)">waitAndGetOne</A></B>(java.lang.Object&nbsp;o)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits for one future is arrived and get it.</TD>

</TR>
<tr>
<td>
static&nbsp;java.lang.Object</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitAndGetOneThenRemoveIt(java.lang.Object)">waitAndGetOneThenRemoveIt</A></B>(java.lang.Object&nbsp;o)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
attend l'arrivée d'un résultat et retourne ce résultat.</TD>
</TR>
<tr>
<td>

static&nbsp;java.lang.Object</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitAndGetTheNth(java.lang.Object, int)">waitAndGetTheNth</A></B>(java.lang.Object&nbsp;o,
                 int&nbsp;n)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits for the N-th future is arrived and get it.</TD>
</TR>
<tr>
<td>
static&nbsp;void</TD>

<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitN(java.lang.Object, int)">waitN</A></B>(java.lang.Object&nbsp;o,
      int&nbsp;n)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits n futures are arrived.</TD>
</TR>
<tr>
<td>
static&nbsp;void</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitOne(java.lang.Object)">waitOne</A></B>(java.lang.Object&nbsp;o)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits for (at least) one future is arrived.</TD>
</TR>
<tr>
<td>
static&nbsp;int</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitOneAndGetIndex(java.lang.Object)">waitOneAndGetIndex</A></B>(java.lang.Object&nbsp;o)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits that at least one member is arrived and returns its index.</TD>
</TR>
<tr>
<td>
static&nbsp;void</TD>
<TD><B><A HREF="../../../../../org/objectweb/proactive/core/group/ProActiveGroup.html#waitTheNth(java.lang.Object, int)">waitTheNth</A></B>(java.lang.Object&nbsp;o,
           int&nbsp;n)

</td><td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waitd for the N-th future in the list is arrived.</TD>
</TR>
</table>

</div>


<!-- ____________________________ ProActive groupes ______________________________ -->
<div class="slide">
<h1>ProActive - communications collectives</h1>

<p>
Les groupes permettent les
<span class="important">communications collectives</span>.
</p>

<p>
Quand un groupe est passé en argument d'une méthode appliquée sur groupe,
le paramètre est <span class="important">diffusé</span> à tous les
objets actifs du groupe.
<div class="listing">
<pre>
  G g = (G) ProActiveGroup.newGroup("G",params,nodes);
  
  Data mydata  = (Data) ProActiveGroup.newGroup("Data",{data1,data2,data3},nodes);

  g.calcul(mydata); // chaque élem. de g recoit mydata en entier
</pre>
</div>
<p>
Au lieu 
</p>
<div class="listing">
<pre>
  G g = (G) ProActiveGroup.newGroup("G",params,nodes);
  Data mydata  = (Data) ProActiveGroup.newGroup("Data",{data1,data2,data3},nodes);
  
  ProActiveGroup.setScatterGroup( mydata );
  g.calcul( mydata ); // chaque élem. de g recoit un objet de mydata 
</pre>
</div>


</div>



</div> <!-- ********** div final ************* -->

</body>
</html>
