<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>JavaScript SOAP Client - DEMO</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<meta name="script" http-equiv="Content-Script-Type" content="text/javascript" />
	<meta name="script" http-equiv="Content-Style-Type" content="text/css" />
	<script type="text/javascript" src="./soapclient.js"></script>
	<script type="text/javascript">


	var LicenseKey="02-Q24B-X57Z"; // la cl√© de S. Genaud
	var query="130.79.192.160";

	// DO NOT USE ?wsdl in the end of wsdl url as the toolkit adds it automatically !
      var wsdl_url = "http://ws.fraudlabs.com/ip2locationwebservice.asmx";
	var url = document.location.href.replace("ip2location.html", "ip2locationwebservice.asmx");
	
	function locate_callBack(r)
	{
		alert(r);
	}
	
	// DEMO 2
	function locate()
	{

		var params = new SOAPClientParameters();
		var seq = new Array();
		seq["IP"] = document.form1.ip.value;
		seq["LICENSE"] = LicenseKey;
		alert("Invoke locate()");
		params.add("param1", seq);
		SOAPClient.invoke(url, "IP2Location", params, true, locate_callBack);
	}
	
	
	// DEMO 5
	function ThrowException()
	{
		try
		{
			var pl = new SOAPClientParameters();
			var e = SOAPClient.invoke(url, "ThrowException", pl, false);
		}
		catch(e)
		{
			alert("An error has occured!");
		}
	}
	
	// DEMO 11
	function GetSoapResponse()
	{
		var pl = new SOAPClientParameters();
		SOAPClient.invoke(url, "HelloWorld", pl, true, GetSoapResponse_callBack);
	}
	function GetSoapResponse_callBack(r, soapResponse)
	{
		if(soapResponse.xml)    // IE
		    alert(soapResponse.xml);
		else                    // MOZ
		    alert((new XMLSerializer()).serializeToString(soapResponse));
	}
	



</script>

</head>
<body>
    
<div>
    <form id="form1" name="form1" action="#" method="post">      
	
	    <label>IP: </label>
          <input type="text" name="ip" id="ip" value="130.79.192.166" />
        <input type="button" value="Locate" onclick="locate();" />
	    <hr />
    </form>
</div>     
    
</body>
</html>
