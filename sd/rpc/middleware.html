<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>IMW: Middleware</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="IMW: Middleware"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2014-10-08T10:59+0200"/>
<meta name="author" content="Stephane Genaud"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/worg.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js">
/**
 *
 * @source: http://orgmode.org/mathjax/MathJax.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in http://orgmode.org/mathjax/MathJax.js.
 *
 * Copyright (C) 2012-2013  MathJax
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in http://orgmode.org/mathjax/MathJax.js.
 *
 */

/*
@licstart  The following is the entire license notice for the
JavaScript code below.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code below is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code below.
*/
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">IMW: Middleware</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Introduction</a>
<ul>
<li><a href="#sec-1-1">1.1 Technologies for Distributed Systems</a></li>
<li><a href="#sec-1-2">1.2 Technologies change but &hellip; concepts stay</a></li>
<li><a href="#sec-1-3">1.3 Middleware: definition</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1 What is middleware?</a></li>
<li><a href="#sec-1-3-2">1.3.2 Middleware provides inter-machines communication facilities,</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4 A Time-line of technologies</a></li>
<li><a href="#sec-1-5">1.5 Principle Design Choices</a></li>
<li><a href="#sec-1-6">1.6 Abstraction</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1 Abstraction of communication primitives</a></li>
<li><a href="#sec-1-6-2">1.6.2 Abstraction Trade-off</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7 Interoperability</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1 Machine-independent</a></li>
<li><a href="#sec-1-7-2">1.7.2 OS-independent</a></li>
<li><a href="#sec-1-7-3">1.7.3 Language-independent</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8 Versatility</a></li>
</ul>
</li>
<li><a href="#sec-2">2 Sun RPC</a>
<ul>
<li><a href="#sec-2-1">2.1 Background</a></li>
<li><a href="#sec-2-2">2.2 Interoperability</a></li>
<li><a href="#sec-2-3">2.3 RPC service identification</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1 Services are identified by</a></li>
<li><a href="#sec-2-3-2">2.3.2 Example</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4 Service Registration (portmap)</a></li>
<li><a href="#sec-2-5">2.5 Service Registration (prognum)</a></li>
<li><a href="#sec-2-6">2.6 Standard RPC services</a>
<ul>
<li><a href="#sec-2-6-1">2.6.1 file <code>/etc/rpc</code></a></li>
<li><a href="#sec-2-6-2">2.6.2 Tips &amp; Tricks : rpc services <i>may not</i> be started on recent systems</a></li>
</ul>
</li>
<li><a href="#sec-2-7">2.7 Running Services</a></li>
<li><a href="#sec-2-8">2.8 Programming with ONC RPC</a>
<ul>
<li><a href="#sec-2-8-1">2.8.1 The <b>higher</b> layer: small set of functions to describe and call services in a simple way.</a></li>
<li><a href="#sec-2-8-2">2.8.2 The <b>lower</b> layer: 20+ functions to fine tune the calls.</a></li>
</ul>
</li>
<li><a href="#sec-2-9">2.9 Server-side steps</a>
<ul>
<li><a href="#sec-2-9-1">2.9.1 The primtives are</a></li>
</ul>
</li>
<li><a href="#sec-2-10">2.10 Client-side steps</a></li>
<li><a href="#sec-2-11">2.11 Example of high-layer usage (server side 1/2)</a></li>
<li><a href="#sec-2-12">2.12 Example of high-layer usage (server side 2/2)</a></li>
<li><a href="#sec-2-13">2.13 Example of high-layer usage (client side 1/2)</a></li>
<li><a href="#sec-2-14">2.14 Try It</a>
<ul>
<li><a href="#sec-2-14-1">2.14.1 Have you noticed?</a></li>
</ul>
</li>
<li><a href="#sec-2-15">2.15 Another way: <code>rpcgen</code></a></li>
<li><a href="#sec-2-16">2.16 Example with <code>rpcgen</code></a></li>
<li><a href="#sec-2-17">2.17 Files generated by <code>rpcgen</code></a></li>
<li><a href="#sec-2-18">2.18 Try It (client/server with rpcgen)</a></li>
<li><a href="#sec-2-19">2.19 Code Generated by <code>rpcgen</code></a></li>
<li><a href="#sec-2-20">2.20 RPCL in Brief (enumeration, constants &amp; simple)</a>
<ul>
<li><a href="#sec-2-20-1">2.20.1 Enumerations and Constants</a></li>
<li><a href="#sec-2-20-2">2.20.2 Simple Declarations</a></li>
<li><a href="#sec-2-20-3">2.20.3 Added types (bool and string)</a></li>
</ul>
</li>
<li><a href="#sec-2-21">2.21 RPCL in Brief (arrays)</a>
<ul>
<li><a href="#sec-2-21-1">2.21.1 Fixed-length arrays</a></li>
<li><a href="#sec-2-21-2">2.21.2 Variable-length arrays</a></li>
</ul>
</li>
<li><a href="#sec-2-22">2.22 RPCL in brief (typedef)</a>
<ul>
<li><a href="#sec-2-22-1">2.22.1 Type definitions</a></li>
</ul>
</li>
<li><a href="#sec-2-23">2.23 RPCL in Brief (pointers)</a></li>
<li><a href="#sec-2-24">2.24 RPCL in Brief (struct)</a></li>
<li><a href="#sec-2-25">2.25 Tips &amp; Tricks</a>
<ul>
<li><a href="#sec-2-25-1">2.25.1 Linux</a></li>
<li><a href="#sec-2-25-2">2.25.2 MacOSX</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-3">3 Java RMI</a>
<ul>
<li><a href="#sec-3-1">3.1 History</a></li>
<li><a href="#sec-3-2">3.2 RPC in the world of RMI</a></li>
<li><a href="#sec-3-3">3.3 The Remote class</a></li>
<li><a href="#sec-3-4">3.4 The Remote class  and interface</a>
<ul>
<li><a href="#sec-3-4-1">3.4.1 A Remote class must be defined in 2 parts</a></li>
<li><a href="#sec-3-4-2">3.4.2 Interface</a></li>
<li><a href="#sec-3-4-3">3.4.3 Class</a></li>
</ul>
</li>
<li><a href="#sec-3-5">3.5 The Serializable class</a></li>
<li><a href="#sec-3-6">3.6 Registering the services</a>
<ul>
<li><a href="#sec-3-6-1">3.6.1 Characteristics of <code>rmiregistry</code></a></li>
</ul>
</li>
<li><a href="#sec-3-7">3.7 Example 1: Remote object with primitive types</a>
<ul>
<li><a href="#sec-3-7-1">3.7.1 The different pieces of code</a></li>
</ul>
</li>
<li><a href="#sec-3-8">3.8 Example 1: Service Description</a></li>
<li><a href="#sec-3-9">3.9 Example 1: Service Implementation</a></li>
<li><a href="#sec-3-10">3.10 Example 1: Service Registration</a></li>
<li><a href="#sec-3-11">3.11 Example 1: Client code</a></li>
<li><a href="#sec-3-12">3.12 Try It (RMI basic client/server)</a></li>
<li><a href="#sec-3-13">3.13 Trouble shooting 1</a>
<ul>
<li><a href="#sec-3-13-1">3.13.1 Observation</a></li>
<li><a href="#sec-3-13-2">3.13.2 Why?</a></li>
<li><a href="#sec-3-13-3">3.13.3 Solution</a></li>
</ul>
</li>
<li><a href="#sec-3-14">3.14 Trouble shooting 2</a>
<ul>
<li><a href="#sec-3-14-1">3.14.1 Observation</a></li>
<li><a href="#sec-3-14-2">3.14.2 Why?</a></li>
<li><a href="#sec-3-14-3">3.14.3 Solution</a></li>
</ul>
</li>
<li><a href="#sec-3-15">3.15 Trouble shooting 3</a>
<ul>
<li><a href="#sec-3-15-1">3.15.1 Debugging</a></li>
<li><a href="#sec-3-15-2">3.15.2 Solution</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">4 Corba</a>
<ul>
<li><a href="#sec-4-1">4.1 History</a>
<ul>
<li><a href="#sec-4-1-1">4.1.1 Context</a></li>
<li><a href="#sec-4-1-2">4.1.2 Implemenations</a></li>
</ul>
</li>
<li><a href="#sec-4-2">4.2 Sun Implementation</a>
<ul>
<li><a href="#sec-4-2-1">4.2.1 Since 1.3</a></li>
<li><a href="#sec-4-2-2">4.2.2 Since 1.4</a></li>
<li><a href="#sec-4-2-3">4.2.3 Imports</a></li>
</ul>
</li>
<li><a href="#sec-4-3">4.3 Characteristics</a>
<ul>
<li><a href="#sec-4-3-1">4.3.1 A RPC framework</a></li>
<li><a href="#sec-4-3-2">4.3.2 External Services</a></li>
</ul>
</li>
<li><a href="#sec-4-4">4.4 IDL</a></li>
<li><a href="#sec-4-5">4.5 IDL structure</a></li>
<li><a href="#sec-4-6">4.6 IDL types</a></li>
<li><a href="#sec-4-7">4.7 IDL types (array)</a>
<ul>
<li><a href="#sec-4-7-1">4.7.1 Fixed-size arrays</a></li>
<li><a href="#sec-4-7-2">4.7.2 Arbitrary-size arrays</a></li>
</ul>
</li>
<li><a href="#sec-4-8">4.8 IDL type mapping to Java</a></li>
<li><a href="#sec-4-9">4.9 IDL struct mapping to Java</a></li>
<li><a href="#sec-4-10">4.10 IDL Methods</a>
<ul>
<li><a href="#sec-4-10-1">4.10.1 General Form</a></li>
<li><a href="#sec-4-10-2">4.10.2 with:</a></li>
</ul>
</li>
<li><a href="#sec-4-11">4.11 IDL Oneway Methods</a>
<ul>
<li><a href="#sec-4-11-1">4.11.1 Normal method call: waits for return and return is guaranteed</a></li>
<li><a href="#sec-4-11-2">4.11.2 Oneway call: no wait, but not guaranteed execution</a></li>
</ul>
</li>
<li><a href="#sec-4-12">4.12 IDL Parameter Passing</a>
<ul>
<li><a href="#sec-4-12-1">4.12.1 Reference or Copy</a></li>
<li><a href="#sec-4-12-2">4.12.2 Observations</a></li>
</ul>
</li>
<li><a href="#sec-4-13">4.13 CORBA Architecture</a></li>
<li><a href="#sec-4-14">4.14 Transient and Persistent Objects</a>
<ul>
<li><a href="#sec-4-14-1">4.14.1 Transient CORBA object</a></li>
<li><a href="#sec-4-14-2">4.14.2 Persistent CORBA object</a></li>
</ul>
</li>
<li><a href="#sec-4-15">4.15 POA</a>
<ul>
<li><a href="#sec-4-15-1">4.15.1 OA and POA</a></li>
</ul>
</li>
<li><a href="#sec-4-16">4.16 POA and Servants</a></li>
<li><a href="#sec-4-17">4.17 POA Control in Java (1/3)</a>
<ul>
<li><a href="#sec-4-17-1">4.17.1 The first POA is managed by the ORB, and called RootPOA by convention.</a></li>
<li><a href="#sec-4-17-2">4.17.2 “Service” POAs can be forked from the RootPOA (it is not mandatory: you can use</a></li>
</ul>
</li>
<li><a href="#sec-4-18">4.18 POA Control in Java (2/3)</a>
<ul>
<li><a href="#sec-4-18-1">4.18.1 POAManager’s States</a></li>
</ul>
</li>
<li><a href="#sec-4-19">4.19 POA Control in Java (3/3)</a>
<ul>
<li><a href="#sec-4-19-1">4.19.1 Servants</a></li>
</ul>
</li>
<li><a href="#sec-4-20">4.20 POA behavior</a>
<ul>
<li><a href="#sec-4-20-1">4.20.1 Thread policy:</a></li>
<li><a href="#sec-4-20-2">4.20.2 Lifespan policy:</a></li>
</ul>
</li>
<li><a href="#sec-4-21">4.21 Example using Java JDK</a>
<ul>
<li><a href="#sec-4-21-1">4.21.1 The Sun JDK (now open-jdk) provides since a long time classes and tools to build CORBA apps.</a></li>
<li><a href="#sec-4-21-2">4.21.2 Tools</a></li>
</ul>
</li>
<li><a href="#sec-4-22">4.22 NamingService (JDK): <code>orbd</code></a></li>
<li><a href="#sec-4-23">4.23 Example Outline</a>
<ul>
<li><a href="#sec-4-23-1">4.23.1 POA Model, Transient server</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Technologies for Distributed Systems</h3>
<div class="outline-text-3" id="text-1-1">

<ul>
<li>Extremely fast evolution since 1985:
     about a technology every 5 years.<br/>
</li>
<li>Implementations adapt to up-to-date technology<br/>
     e.g If networks go faster, it is possible to convey bigger messages.<br/>
         If the cost of some hardware becomes low, no need to spare it.
</li>
</ul>


</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Technologies change but &hellip; concepts stay</h3>
<div class="outline-text-3" id="text-1-2">

<ul>
<li>Client-server is the central concept:<br/>
      The <b>client</b> can make a request at any time,<br/>
      The <b>server</b> permanently waits for incoming requests
</li>
</ul>

<p><img src="./img/S9_RPC_works.png" width="300" alt="./img/S9_RPC_works.png" />
</p>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Middleware: definition</h3>
<div class="outline-text-3" id="text-1-3">


</div>

<div id="outline-container-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> What is middleware? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-1-3-1">

<ul>
<li>A sofware layer between the OS and the application allowing 
      a set of distributed computers to communicate in a standardized
      way.
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Middleware provides inter-machines communication facilities,</h4>
<div class="outline-text-4" id="text-1-3-2">

<p>    but may also include services, such as authentification services,
    resource directories, distributed file catalogs, &hellip;
</p>
</div>
</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> A Time-line of technologies</h3>
<div class="outline-text-3" id="text-1-4">

<p>  <img src="../img/timeline.png" width="60%" alt="../img/timeline.png" />
</p>
</div>

</div>

<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Principle Design Choices</h3>
<div class="outline-text-3" id="text-1-5">

<ul>
<li>Abstraction vs. Performance
</li>
<li>Interoperability
</li>
<li>Versatility
</li>
</ul>

</div>

</div>

<div id="outline-container-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Abstraction</h3>
<div class="outline-text-3" id="text-1-6">


</div>

<div id="outline-container-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Abstraction of communication primitives</h4>
<div class="outline-text-4" id="text-1-6-1">

<ul>
<li>too low level: rapidly obsolete, lower programming productivity
</li>
<li>too high level: difficult to optimize for performance 
</li>
</ul>

</div>

</div>

<div id="outline-container-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> Abstraction Trade-off</h4>
<div class="outline-text-4" id="text-1-6-2">

<ul>
<li>independent from the architecture: execute across
      different systems without <b>source code</b> modification
</li>
<li>Hide details related to communication/synchronization management
      (e.g <code>Remote Procedure Calls</code> more abstract than <code>sockets</code>)
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Interoperability</h3>
<div class="outline-text-3" id="text-1-7">


</div>

<div id="outline-container-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Machine-independent</h4>
<div class="outline-text-4" id="text-1-7-1">

<p>    e.g <a href="http://www.ietf.org/rfc/rfc1057.txt">Sun RPC</a> 
    \vspace{5mm}
</p></div>

</div>

<div id="outline-container-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> OS-independent</h4>
<div class="outline-text-4" id="text-1-7-2">

<p>    e.g <a href="http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html">Java-RMI</a>
    \vspace{5mm}
</p></div>

</div>

<div id="outline-container-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Language-independent</h4>
<div class="outline-text-4" id="text-1-7-3">

<p>    e.g <a href="http://www.corba.org">Corba</a>, <a href="http://www.w3.org/TR/soap/">SOAP</a>
</p></div>
</div>

</div>

<div id="outline-container-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Versatility</h3>
<div class="outline-text-3" id="text-1-8">

<p>   The more general, the more versatile 
</p><ul>
<li>Example 1: SOAP communicates through XML pieces of text 
</li>
<li>\(\Rightarrow\) SOAP toolkits can be found for almost all languages.
</li>
</ul>

<p><img src="../soap-img/soapuser-archi1.png" width="60%" alt="../soap-img/soapuser-archi1.png" />
</p>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Sun RPC</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Background</h3>
<div class="outline-text-3" id="text-2-1">

<p>   Sun RPC  (aka RPC ONC (Open Network Computing)) 
</p><ul>
<li>are the original RPC (<a href="http://tools.ietf.org/html/rfc1831">RFC 1831</a>), introduced by Sun in 1988
</li>
<li>motivation: provide a support to inter-machines services
</li>
<li>NFS as first target, NIS, &hellip;.
</li>
<li>is open source software (BSD license since 2009)
</li>
</ul>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Interoperability</h3>
<div class="outline-text-3" id="text-2-2">

<ul>
<li>ONC RPC allow programs on different OS and machines to communicate
</li>
<li>It may be in different languages but C in 99% cases.
</li>
<li>Relies on <a href="http://www.ietf.org/rfc/rfc4506.txt">XDR</a> (eXternal Data Representation)
</li>
</ul>


</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> RPC service identification</h3>
<div class="outline-text-3" id="text-2-3">


</div>

<div id="outline-container-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> Services are identified by &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-3-1">

<ol>
<li>the program name (<code>prog_name</code>)
</li>
<li>the program version (<code>prog_ver</code>)
</li>
<li>the function name
</li>
</ol>

</div>

</div>

<div id="outline-container-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_beamercolorbox">B_beamercolorbox</span></span></h4>
<div class="outline-text-4" id="text-2-3-2">




<pre class="src src-C"><span style="color: #228b22;">program</span> <span style="color: #a0522d;">MYPROG</span> {
  <span style="color: #228b22;">version</span> <span style="color: #a0522d;">VERSION_ONE</span> {
    <span style="color: #228b22;">void</span> <span style="color: #a0522d;">MYPROG_NULL</span>(<span style="color: #228b22;">void</span>) = 0;
    <span style="color: #228b22;">answer</span> <span style="color: #a0522d;">MYPROG_MYFUNC</span>(data) = 1;
  } = 1;
} = 0x2000:0001;
</pre>


</div>
</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Service Registration (portmap)</h3>
<div class="outline-text-3" id="text-2-4">

<p> This service must be registered in a directory service generally called <i>portmapper</i> 
</p><ul>
<li>acts as a name server
</li>
<li>converts : &lt;prog<sub>name</sub> + ver + protocol&gt; to &lt;portnumber&gt;
</li>
<li>exact service name depending on sytem/distribution : <code>rpcbind</code> (or sometimes <code>portmap</code>, or <code>rpc.portmap</code>)
</li>
<li>attached to port 111
</li>
</ul>


</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Service Registration (prognum)</h3>
<div class="outline-text-3" id="text-2-5">


<p>
Registration needs (<code>rpcregister</code> 1st arg for example)
a 32-bit identifier (sometimes called RPC port) 
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Range (hex.)</th><th scope="col" class="left">role</th></tr>
</thead>
<tbody>
<tr><td class="left">00000000-1fffffff</td><td class="left">defined by rpc@sun.com</td></tr>
<tr><td class="left">20000000-3fffffff</td><td class="left">defined by user</td></tr>
<tr><td class="left">40000000-5fffffff</td><td class="left">transient (dynamic server)</td></tr>
<tr><td class="left">60000000-ffffffff</td><td class="left">reserved</td></tr>
</tbody>
</table>



</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Standard RPC services</h3>
<div class="outline-text-3" id="text-2-6">


</div>

<div id="outline-container-2-6-1" class="outline-4">
<h4 id="sec-2-6-1"><span class="section-number-4">2.6.1</span> file <code>/etc/rpc</code> &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-6-1">




<pre class="src src-c">portmapper  100000  
rstatd      100001  
rusersd     100002  
nfs         100003  
ypserv      100004 
mountd      100005 
ypbind      100007
walld       100008 
</pre>


</div>

</div>

<div id="outline-container-2-6-2" class="outline-4">
<h4 id="sec-2-6-2"><span class="section-number-4">2.6.2</span> Tips &amp; Tricks : rpc services <i>may not</i> be started on recent systems</h4>
<div class="outline-text-4" id="text-2-6-2">

<ul>
<li>MacOSX since Mavericks : run <code>sudo launchctl start com.apple.rpcbind</code>
</li>
<li>Linux : check that package <code>rpcbind</code> is installed
</li>
</ul>



</div>
</div>

</div>

<div id="outline-container-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> Running Services &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_ignoreheading">B_ignoreheading</span></span></h3>
<div class="outline-text-3" id="text-2-7">




<pre class="src src-c">  % rpcinfo -p
    program vers proto   port
   100000    2   tcp    111  portmapper
   100000    2   udp    111  portmapper
536870913    1   udp  58764
536870913    1   tcp  65106
</pre>

<p>
 Two last lines are one user program.
</p>




</div>

</div>

<div id="outline-container-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> Programming with ONC RPC</h3>
<div class="outline-text-3" id="text-2-8">

<p>   Two layers:
</p>
</div>

<div id="outline-container-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> The <b>higher</b> layer: small set of functions to describe and call services in a simple way.</h4>
<div class="outline-text-4" id="text-2-8-1">

<ul>
<li>Essential primitives: <code>registerrpc()</code> and <code>callrpc()</code> <br/>
</li>
<li>However, limitations: udp only, no auth, and encoding/decoding by hand.   
</li>
</ul>


</div>

</div>

<div id="outline-container-2-8-2" class="outline-4">
<h4 id="sec-2-8-2"><span class="section-number-4">2.8.2</span> The <b>lower</b> layer: 20+ functions to fine tune the calls.</h4>
<div class="outline-text-4" id="text-2-8-2">

<ul>
<li>Much more complex, used for stressed services, for example 
     to implement asynchronous RPC and authentification.  
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> Server-side steps</h3>
<div class="outline-text-3" id="text-2-9">

<p>   The server must <b>register</b>: asks the local portmap to:
</p><ol>
<li>create a new entry so that clients can be routed 
</li>
<li>associate a service number and the address of the function 
     that implements it, or the address of the <i>dispatcher</i>.
</li>
</ol>


</div>

<div id="outline-container-2-9-1" class="outline-4">
<h4 id="sec-2-9-1"><span class="section-number-4">2.9.1</span> The primtives are</h4>
<div class="outline-text-4" id="text-2-9-1">

<ul>
<li><code>svc_register()</code> and <code>pmap_set()</code> (low level)
</li>
<li><code>rpcregister()</code> (high level)
</li>
<li>on exit, <code>svc_unregister()</code>, <code>pmap_uset()</code>
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-2-10" class="outline-3">
<h3 id="sec-2-10"><span class="section-number-3">2.10</span> Client-side steps</h3>
<div class="outline-text-3" id="text-2-10">

<p>   The client must initialize (1), lookup in remote portmap to find the service (2),
   then, several calls can be made afterwards (3):
</p><ol>
<li><code>clnt_create()</code> / <code>clnttcp_create()</code> / <code>clntudp_create()</code>,
</li>
<li><code>pmap_getport()</code>
</li>
<li><code>clnt_call()</code>
</li>
</ol>


<p>
   The higher level <code>callrpc()</code> does steps 1, 2 and 3 in a row.
</p>
</div>

</div>

<div id="outline-container-2-11" class="outline-3">
<h3 id="sec-2-11"><span class="section-number-3">2.11</span> Example of high-layer usage (server side 1/2)</h3>
<div class="outline-text-3" id="text-2-11">

<p><i>Define the service on the server:</i>
</p>


<pre class="src src-c"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;rpc/xdr.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;rpc/rpc.h&gt;</span>

<span style="color: #228b22;">int</span>* <span style="color: #0000ff;">my_function</span>(<span style="color: #228b22;">int</span> *<span style="color: #a0522d;">n</span>) {
   <span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">res</span>;
   *n = *n + 1;
   res= *n; 
   <span style="color: #a020f0;">return</span> (&amp;res);
}
</pre>


</div>

</div>

<div id="outline-container-2-12" class="outline-3">
<h3 id="sec-2-12"><span class="section-number-3">2.12</span> Example of high-layer usage (server side 2/2)</h3>
<div class="outline-text-3" id="text-2-12">

<p><i>Register the service on the server:</i>
</p>


<pre class="src src-c"><span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">PROGNUM</span> 0x20000100                                                      
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">VERSNUM</span> 1                                                               
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">PROCNUM</span> 1

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span> (<span style="color: #228b22;">void</span>) {
   registerrpc( PROGNUM,
                VERSNUM,
                PROCNUM,
                my_function, <span style="color: #b22222;">/*</span><span style="color: #b22222;">ptr to function</span><span style="color: #b22222;">*/</span>
                (<span style="color: #228b22;">xdrproc_t</span>) xdr_int, <span style="color: #b22222;">/*</span><span style="color: #b22222;">encode input</span><span style="color: #b22222;">*/</span>
                (<span style="color: #228b22;">xdrproc_t</span>) xdr_int);<span style="color: #b22222;">/*</span><span style="color: #b22222;">decode output</span><span style="color: #b22222;">*/</span>

    svc_run(); <span style="color: #b22222;">/*  </span><span style="color: #b22222;">server starts listening ... </span><span style="color: #b22222;">*/</span>
}
</pre>


</div>

</div>

<div id="outline-container-2-13" class="outline-3">
<h3 id="sec-2-13"><span class="section-number-3">2.13</span> Example of high-layer usage (client side 1/2)</h3>
<div class="outline-text-3" id="text-2-13">

<p>   <i>Call the service from the client:</i>
</p>


<pre class="src src-c"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">argc</span>, <span style="color: #228b22;">char</span> **<span style="color: #a0522d;">argv</span>) {
 <span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span>=0x41424344;
 <span style="color: #228b22;">char</span> *<span style="color: #a0522d;">host</span> = argv[1];
 <span style="color: #228b22;">int</span> <span style="color: #a0522d;">stat</span>;
 stat = callrpc(host,
                PROGNUM,
                VERSNUM,
                PROCNUM,
                (<span style="color: #228b22;">xdrproc_t</span>) xdr_int,  <span style="color: #b22222;">//</span><span style="color: #b22222;">intput encoding</span>
                (<span style="color: #228b22;">char</span> *) &amp;n,          <span style="color: #b22222;">//</span><span style="color: #b22222;">input param</span>
                (<span style="color: #228b22;">xdrproc_t</span>) xdr_int,  <span style="color: #b22222;">//</span><span style="color: #b22222;">output decoding</span>
                (<span style="color: #228b22;">char</span> *) &amp;res);       <span style="color: #b22222;">//</span><span style="color: #b22222;">return of func</span>
}
</pre>



</div>

</div>

<div id="outline-container-2-14" class="outline-3">
<h3 id="sec-2-14"><span class="section-number-3">2.14</span> Try It</h3>
<div class="outline-text-3" id="text-2-14">

<ul>
<li>Sources : <a href="http://icps.u-strasbg.fr/~genaud/courses/sd/src/rpc/example_1.tar.gz">Example 1</a>
</li>
</ul>



</div>

<div id="outline-container-2-14-1" class="outline-4">
<h4 id="sec-2-14-1"><span class="section-number-4">2.14.1</span> Have you noticed?</h4>
<div class="outline-text-4" id="text-2-14-1">

<ul>
<li>There are only <b>1</b> parameter for input and <b>1</b> for output
</li>
<li>the variable returned <code>res</code> is declared <code>static</code> because it may have to survive for a while
</li>
</ul>



</div>
</div>

</div>

<div id="outline-container-2-15" class="outline-3">
<h3 id="sec-2-15"><span class="section-number-3">2.15</span> Another way: <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-15">

<ul>
<li>Taking care of conversion through XDR is difficult
</li>
<li>The <code>rpcgen</code> compiler automates the process of writing RPC applications
</li>
<li><code>rpcgen</code> accepts interface descriptions in <a href="http://docs.oracle.com/cd/E19683-01/816-1435/6m7rrfn9k/index.html">RPCL (RPC Language)</a>
</li>
<li>and generates skeletons programs (C code) 
</li>
</ul>


</div>

</div>

<div id="outline-container-2-16" class="outline-3">
<h3 id="sec-2-16"><span class="section-number-3">2.16</span> Example with <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-16">

<ul>
<li>Consider an <i>operation</i> <code>addition</code>, that adds up 2 <code>int</code> s
</li>
<li>Describe this service in a file <code>myservice.x</code> 
</li>
</ul>




<pre class="src src-C"><span style="color: #a020f0;">struct</span> <span style="color: #228b22;">data</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">arg1</span>;  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">arg2</span>;
};
<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">data</span> <span style="color: #228b22;">data</span>;
<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">response</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">result</span>; <span style="color: #228b22;">unsigned</span> <span style="color: #228b22;">char</span> <span style="color: #a0522d;">error</span>;
};
<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">response</span> <span style="color: #228b22;">response</span>;

<span style="color: #228b22;">program</span> <span style="color: #a0522d;">MYCOMPUTATION</span> {
  <span style="color: #228b22;">version</span> <span style="color: #a0522d;">VERSION_ONE</span>{
    <span style="color: #228b22;">void</span> <span style="color: #a0522d;">MYCOMPUTATION_NULL</span>(<span style="color: #228b22;">void</span>) = 0;
    <span style="color: #228b22;">response</span> <span style="color: #a0522d;">MYCOMPUTATION_ADDITION</span>(<span style="color: #228b22;">data</span>) = 1;
  } = 1;
} = 0x20000001;
</pre>


</div>

</div>

<div id="outline-container-2-17" class="outline-3">
<h3 id="sec-2-17"><span class="section-number-3">2.17</span> Files generated by <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-17">

<ul>
<li>Generate the skeletons
</li>
</ul>




<pre class="src src-c">% rpcgen -a myservice.x
</pre>

<ul>
<li>The following files are generated
</li>
</ul>




<pre class="src src-c">myservice.h        <span style="color: #b22222;">/* </span><span style="color: #b22222;">parameter definitions </span><span style="color: #b22222;">*/</span>
myservice_xdr.c    <span style="color: #b22222;">/* </span><span style="color: #b22222;">XDR conversion </span><span style="color: #b22222;">*/</span>
myservice_svc.c    <span style="color: #b22222;">/* </span><span style="color: #b22222;">stubs server </span><span style="color: #b22222;">*/</span>   
myservice_clnt.c   <span style="color: #b22222;">/* </span><span style="color: #b22222;">stubs client </span><span style="color: #b22222;">*/</span>
myservice_server.c <span style="color: #b22222;">/* </span><span style="color: #b22222;">server code </span><span style="color: #b22222;">*/</span>
myservice_client.c <span style="color: #b22222;">/* </span><span style="color: #b22222;">client code </span><span style="color: #b22222;">*/</span>
</pre>

<ul>
<li>Only the <code>_client.c</code> and <code>_server.c</code> files are intended to the programmer
</li>
</ul>


</div>

</div>

<div id="outline-container-2-18" class="outline-3">
<h3 id="sec-2-18"><span class="section-number-3">2.18</span> Try It (client/server with rpcgen)</h3>
<div class="outline-text-3" id="text-2-18">


<ul>
<li>Here are skeletons for a basic client / server scheme 
</li>
<li>Sources : <a href="http://icps.u-strasbg.fr/~genaud/courses/sd/src/rpc/example_2_rpcgen_incomplete.tar.gz">Example 2</a>
</li>
</ul>


</div>

</div>

<div id="outline-container-2-19" class="outline-3">
<h3 id="sec-2-19"><span class="section-number-3">2.19</span> Code Generated by <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-19">

<ul>
<li>In <code>_client.c</code> examples calls to functions are 
</li>
</ul>




<pre class="src src-C">result = mycomputation_addition_1(
           &amp;mycomputation_addition_1_arg, clnt);
<span style="color: #a020f0;">if</span> (result == <span style="color: #008b8b;">NULL</span>) {
     clnt_perror(clnt, <span style="color: #8b2252;">"call failed:"</span>);
 }
</pre>


<ul>
<li>In <code>_server.c</code> <i>handlers</i> are created
</li>
</ul>




<pre class="src src-C"><span style="color: #228b22;">response</span> *
<span style="color: #0000ff;">mycomputation_addition_1_svc</span>(<span style="color: #228b22;">data</span> *<span style="color: #a0522d;">argp</span>,
                             <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">svc_req</span> *<span style="color: #a0522d;">rqstp</span>)
{
      <span style="color: #a020f0;">static</span> <span style="color: #228b22;">response</span>  <span style="color: #a0522d;">result</span>;

      <span style="color: #b22222;">/* </span><span style="color: #b22222;">insert server code here </span><span style="color: #b22222;">*/</span>

      <span style="color: #a020f0;">return</span>(&amp;result);
}
</pre>


</div>

</div>

<div id="outline-container-2-20" class="outline-3">
<h3 id="sec-2-20"><span class="section-number-3">2.20</span> RPCL in Brief (enumeration, constants &amp; simple)</h3>
<div class="outline-text-3" id="text-2-20">


</div>

<div id="outline-container-2-20-1" class="outline-4">
<h4 id="sec-2-20-1"><span class="section-number-4">2.20.1</span> Enumerations and Constants</h4>
<div class="outline-text-4" id="text-2-20-1">




<pre class="src src-C"><span style="color: #a020f0;">enum</span> <span style="color: #228b22;">colortype</span> { <span style="color: #a0522d;">RED</span> = 0, <span style="color: #a0522d;">GREEN</span> = 1,<span style="color: #a0522d;">BLUE</span> = 2  };
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">PI</span> = 3.14; 
</pre>

</div>

</div>

<div id="outline-container-2-20-2" class="outline-4">
<h4 id="sec-2-20-2"><span class="section-number-4">2.20.2</span> Simple Declarations</h4>
<div class="outline-text-4" id="text-2-20-2">




<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>;
<span style="color: #228b22;">colortype</span> <span style="color: #a0522d;">c</span>;
</pre>

</div>

</div>

<div id="outline-container-2-20-3" class="outline-4">
<h4 id="sec-2-20-3"><span class="section-number-4">2.20.3</span> Added types (bool and string)</h4>
<div class="outline-text-4" id="text-2-20-3">

<ul>
<li><code>bool</code> : boolean, can take TRUE or FALSE values
</li>
<li><code>string</code>: translated to <code>char *</code> (See variable length array).   
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-2-21" class="outline-3">
<h3 id="sec-2-21"><span class="section-number-3">2.21</span> RPCL in Brief (arrays)</h3>
<div class="outline-text-3" id="text-2-21">


</div>

<div id="outline-container-2-21-1" class="outline-4">
<h4 id="sec-2-21-1"><span class="section-number-4">2.21.1</span> Fixed-length arrays</h4>
<div class="outline-text-4" id="text-2-21-1">




<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>[5];
<span style="color: #228b22;">color</span> <span style="color: #a0522d;">palette</span>[8];
</pre>


</div>

</div>

<div id="outline-container-2-21-2" class="outline-4">
<h4 id="sec-2-21-2"><span class="section-number-4">2.21.2</span> Variable-length arrays</h4>
<div class="outline-text-4" id="text-2-21-2">

<ul>
<li>The maximum size is specified between angle brackets, or may be ommitted:
</li>
</ul>




<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">notes_serie</span>&lt;20&gt;;   # at most 20
<span style="color: #228b22;">int</span> heights&lt;&gt;;         # unlimited
string message&lt;256&gt;;
</pre>

<p>
each will translate to a C struct, e.g:
</p>


<pre class="src src-C"><span style="color: #a020f0;">struct</span> {
   <span style="color: #228b22;">u_int</span> <span style="color: #a0522d;">heights_len</span>;<span style="color: #b22222;">/* </span><span style="color: #b22222;"># of items in array </span><span style="color: #b22222;">*/</span>
   <span style="color: #228b22;">int</span> *<span style="color: #a0522d;">heights_val</span>; <span style="color: #b22222;">/* </span><span style="color: #b22222;">pointer to array </span><span style="color: #b22222;">*/</span>
} <span style="color: #a0522d;">heights</span>;
</pre>

</div>
</div>

</div>

<div id="outline-container-2-22" class="outline-3">
<h3 id="sec-2-22"><span class="section-number-3">2.22</span> RPCL in brief (typedef)</h3>
<div class="outline-text-3" id="text-2-22">


</div>

<div id="outline-container-2-22-1" class="outline-4">
<h4 id="sec-2-22-1"><span class="section-number-4">2.22.1</span> Type definitions</h4>
<div class="outline-text-4" id="text-2-22-1">

<p>    Same syntax as C typedef
</p>


<pre class="src src-C"><span style="color: #a020f0;">typedef</span> <span style="color: #228b22;">string</span> <span style="color: #228b22;">name_t</span>&lt;255&gt;; 
<span style="color: #a020f0;">typedef</span> <span style="color: #228b22;">string</span> <span style="color: #228b22;">longstring</span>&lt;&gt;;
</pre>

<p>
will be translated into C code:
</p>


<pre class="src src-C"><span style="color: #a020f0;">typedef</span> <span style="color: #228b22;">char</span> *<span style="color: #228b22;">name_t</span>;
<span style="color: #a020f0;">typedef</span> <span style="color: #228b22;">char</span> *<span style="color: #228b22;">longstring</span>;
</pre>


</div>
</div>

</div>

<div id="outline-container-2-23" class="outline-3">
<h3 id="sec-2-23"><span class="section-number-3">2.23</span> RPCL in Brief (pointers)</h3>
<div class="outline-text-3" id="text-2-23">

<ul>
<li>Pointer declarations are as in C. Address pointers are not sent over the network. 
     Instead, data pointed to are copied. This is useful for sending recursive data 
     types such as lists and trees. 
</li>
</ul>




<pre class="src src-C"><span style="color: #228b22;">tree_t</span> *<span style="color: #a0522d;">t</span>;
</pre>

</div>

</div>

<div id="outline-container-2-24" class="outline-3">
<h3 id="sec-2-24"><span class="section-number-3">2.24</span> RPCL in Brief (struct)</h3>
<div class="outline-text-3" id="text-2-24">

<ul>
<li>Translates as is in C, excepted that an extra typedef is generated.
</li>
</ul>




<pre class="src src-C"><span style="color: #a020f0;">struct</span> <span style="color: #228b22;">coord</span> {  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;  };                           
</pre>

<p>
Translates to:
</p>


<pre class="src src-C"><span style="color: #a020f0;">struct</span> <span style="color: #228b22;">coord</span> {  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;  };
<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">coord</span> <span style="color: #228b22;">coord</span>;
</pre>

<p>
which allows to use <code>coord</code> instead of <code>struct coord</code>
</p>


</div>

</div>

<div id="outline-container-2-25" class="outline-3">
<h3 id="sec-2-25"><span class="section-number-3">2.25</span> Tips &amp; Tricks</h3>
<div class="outline-text-3" id="text-2-25">


</div>

<div id="outline-container-2-25-1" class="outline-4">
<h4 id="sec-2-25-1"><span class="section-number-4">2.25.1</span> Linux &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-25-1">

<ul>
<li>Install: rpc lib provided by package  <code>libtirpc-dev</code>  (0.2.2-5 on ubuntu 12.04) 
</li>
<li>Run: a portmapper is provided by package <code>rpcbind</code>  
</li>
<li>Run: <code>svc_register()</code> might refuse to register ("credentials problem") 
           \(\Rightarrow\) Start server as root or in sudo mode.
</li>
<li>Initialize array variables before calling remote functions 
     ("Can't encode arguments" error).
</li>
</ul>

</div>

</div>

<div id="outline-container-2-25-2" class="outline-4">
<h4 id="sec-2-25-2"><span class="section-number-4">2.25.2</span> MacOSX &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-25-2">

<ul>
<li>Install: the 'Command line tools' element from Xcode in the distrib
              or download it fom  <a href="https://developer.apple.com/downloads/">Apple</a> . 
</li>
<li>Use: <code>rpcgen -C</code> to force generation of ANSI-C code
</li>
</ul>


</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Java RMI</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> History</h3>
<div class="outline-text-3" id="text-3-1">

<ul>
<li>Created by Sun in 1998
</li>
<li>Java only
</li>
<li>Available since JDK &gt;= 1.1
</li>
<li>Since JDK 1.5, stubs are automatically generated (no <code>rmic</code>)
</li>
</ul>

</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> RPC in the world of RMI</h3>
<div class="outline-text-3" id="text-3-2">

<ul>
<li>RMI provides access to <b>objects</b> and their <b>methods</b>
</li>
<li>In contrast to Sun RPC, not only data can be passed
     to remote computations, but also objects that can contain
     code and data.\\[5mm]

</li>
<li>There are 2 ways to communicate in this object-oriented
     paradigm: 
<ol>
<li>through the <code>Remote</code> class
</li>
<li>through the <code>Serializable</code> class
</li>
</ol>

</li>
</ul>


</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> The Remote class</h3>
<div class="outline-text-3" id="text-3-3">


<p>   
   definition: An object of the Remote class can be used remotely.
   It can be used:
</p><ul>
<li>in the address space of the JVM that created it,
</li>
<li>in the address spaces of other JVMs through <i>handles</i> (aka <i>proxies</i>).
</li>
</ul>


<p>   
<img src="../img/proxy.png"  alt="../img/proxy.png" />
The call to a remote object's method is exactly (syntactically) the same as a local one.   
</p>
</div>

</div>

<div id="outline-container-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> The Remote class  and interface</h3>
<div class="outline-text-3" id="text-3-4">


</div>

<div id="outline-container-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> A Remote class must be defined in 2 parts</h4>
<div class="outline-text-4" id="text-3-4-1">

<ul>
<li>an interface (shared between client and server)
</li>
<li>the class itself (implem. on client)
</li>
</ul>

</div>

</div>

<div id="outline-container-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> Interface &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-4-2">




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">MyExample</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Remote</span> {...}
</pre>


</div>

</div>

<div id="outline-container-3-4-3" class="outline-4">
<h4 id="sec-3-4-3"><span class="section-number-4">3.4.3</span> Class &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-4-3">




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyExampleImpl</span> 
  <span style="color: #a020f0;">extends</span>    <span style="color: #228b22;">UnicastRemoteObject</span>
  <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">MyExample</span>  {
    ...
   }
</pre>


</div>
</div>

</div>

<div id="outline-container-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> The Serializable class</h3>
<div class="outline-text-3" id="text-3-5">


<p>
definition: an object of the class Serializable is an object
that can be copied from one address space to another.
</p>

</div>

</div>

<div id="outline-container-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Registering the services</h3>
<div class="outline-text-3" id="text-3-6">

<p>   A process called <b>rmiregistry</b> is in charge of service registration<br/>
   (Equivalent of portmapper)
</p>
</div>

<div id="outline-container-3-6-1" class="outline-4">
<h4 id="sec-3-6-1"><span class="section-number-4">3.6.1</span> Characteristics of <code>rmiregistry</code> &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-6-1">

<ul>
<li>runs on the same host as the services
</li>
<li>default port is 1099
</li>
<li>can be started by program
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> Example 1: Remote object with primitive types</h3>
<div class="outline-text-3" id="text-3-7">

<p>Example parameter passing using primitive types (e.g. int, float, ..) or arrays (e.g. String) 
</p><ul>
<li>In general, parameters just need to be <b>serializable</b> (java.io.Serializable).
</li>
</ul>


</div>

<div id="outline-container-3-7-1" class="outline-4">
<h4 id="sec-3-7-1"><span class="section-number-4">3.7.1</span> The different pieces of code &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-7-1">

<ul>
<li>The service: description of the function prototype
</li>
<li>The service: the implementation of the service
</li>
<li>The server: a generic code which registers the service
</li>
<li>The client: the code that uses the service
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> Example 1: Service Description</h3>
<div class="outline-text-3" id="text-3-8">


<p>
A service is described by an <b>interface</b>.
</p><ul>
<li>known by the client and the server.
</li>
</ul>





<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.<span style="color: #228b22;">Remote</span>;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.<span style="color: #228b22;">RemoteException</span>;

<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Operation</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Remote</span> {

    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">addition</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) 
                    <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">RemoteException</span> ;
}
</pre>


</div>

</div>

<div id="outline-container-3-9" class="outline-3">
<h3 id="sec-3-9"><span class="section-number-3">3.9</span> Example 1: Service Implementation</h3>
<div class="outline-text-3" id="text-3-9">

<ul>
<li>Only the server <b>implements</b> the service.
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.<span style="color: #008b8b;">server</span>.<span style="color: #228b22;">UnicastRemoteObject</span> ;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.<span style="color: #228b22;">RemoteException</span> ;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #008b8b;">InetAddress</span>.* ;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.* ;

<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">OperationImpl</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">UnicastRemoteObject</span>
  <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">Operation</span>  {

    <span style="color: #a020f0;">public</span> <span style="color: #0000ff;">OperationImpl</span> () <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">RemoteException</span> {
        <span style="color: #a020f0;">super</span>();
    };

    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">addition</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) 
                    <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">RemoteException</span> {
      <span style="color: #a020f0;">return</span>( a + b) ;
  }
}
</pre>


</div>

</div>

<div id="outline-container-3-10" class="outline-3">
<h3 id="sec-3-10"><span class="section-number-3">3.10</span> Example 1: Service Registration</h3>
<div class="outline-text-3" id="text-3-10">

<ul>
<li>The first server task is to register the service 
  in the rmiregistry under a name (here <i>Operation</i>)
</li>
</ul>





<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Serveur</span> {
  <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">main</span>(<span style="color: #228b22;">String</span> [] <span style="color: #a0522d;">args</span>) {
    <span style="color: #a020f0;">try</span> {
       <span style="color: #228b22;">OperationImpl</span> <span style="color: #a0522d;">une_op</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">OperationImpl</span> ();
       Naming.rebind(<span style="color: #8b2252;">"rmi://"</span>+args[0]+<span style="color: #8b2252;">"/Operation"</span>,une_op) ;
       System.out.println(<span style="color: #8b2252;">"Serveur pret"</span>);
     }
     <span style="color: #a020f0;">catch</span> (<span style="color: #228b22;">Exception</span> <span style="color: #a0522d;">e</span>) { 
           System.out.println(re) ; 
     }
}
</pre>


</div>

</div>

<div id="outline-container-3-11" class="outline-3">
<h3 id="sec-3-11"><span class="section-number-3">3.11</span> Example 1: Client code</h3>
<div class="outline-text-3" id="text-3-11">

<ul>
<li>gets a reference to the  the service in the registry (proxy)
</li>
<li>call the service using that reference 
</li>
</ul>





<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.* ;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #228b22;">MalformedURLException</span> ;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.*;

<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Client</span> {
  <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">s</span><span style="color: #228b22;">tatic void ma</span>in(<span style="color: #228b22;">String</span> [] <span style="color: #a0522d;">args</span>) {
    <span style="color: #a020f0;">try</span> {
         <span style="color: #228b22;">Operation</span> <span style="color: #a0522d;">o</span> = (<span style="color: #228b22;">Operation</span>) 
             Naming.lookup(<span style="color: #8b2252;">"//"</span>+args[0]+<span style="color: #8b2252;">"/Operation"</span>);
         System.out.println(<span style="color: #8b2252;">"Client: 33+45= ?"</span>);
         <span style="color: #228b22;">int</span> <span style="color: #a0522d;">r</span> = o.addition( 33, 45 );
         System.out.println(<span style="color: #8b2252;">"33+45="</span>+ r );
     }
     <span style="color: #a020f0;">catch</span> (<span style="color: #228b22;">Exception</span> <span style="color: #a0522d;">e</span>) { System.out.println(<span style="color: #228b22;">e</span>) ; }
   }
}
</pre>


</div>

</div>

<div id="outline-container-3-12" class="outline-3">
<h3 id="sec-3-12"><span class="section-number-3">3.12</span> Try It (RMI basic client/server)</h3>
<div class="outline-text-3" id="text-3-12">

<ul>
<li>Here are the source code for Example 1
</li>
<li>Sources : <a href="http://icps.u-strasbg.fr/people/genaud/public_html/courses/sd/src/rmi/rmi_base_example_add.tar.gz">Example 1 (base<sub>example</sub><sub>add</sub>)</a>
</li>
<li>Choose either <code>Serveur_version_Naming.java</code> or <code>Serveur_version_Locateregistry.java</code>
</li>
</ul>


</div>

</div>

<div id="outline-container-3-13" class="outline-3">
<h3 id="sec-3-13"><span class="section-number-3">3.13</span> Trouble shooting 1</h3>
<div class="outline-text-3" id="text-3-13">


</div>

<div id="outline-container-3-13-1" class="outline-4">
<h4 id="sec-3-13-1"><span class="section-number-4">3.13.1</span> Observation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-1">

<p>    <code>connection refused</code> error when contacting the server.
</p>
</div>

</div>

<div id="outline-container-3-13-2" class="outline-4">
<h4 id="sec-3-13-2"><span class="section-number-4">3.13.2</span> Why? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-2">

<p>    <code>$JAVA_HOME/lib/security/java.policy</code> too restrictive wrt sockets
</p></div>

</div>

<div id="outline-container-3-13-3" class="outline-4">
<h4 id="sec-3-13-3"><span class="section-number-4">3.13.3</span> Solution &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-3">

<p>   To override the standard, run: 
   <code>java -Djava.security.policy=myperm Server</code>
   where file <code>myperm</code> contains, for instance:
</p>



<pre class="src src-java">grant {
    <span style="color: #228b22;">permission</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #a0522d;">SocketPermission</span>
    <span style="color: #8b2252;">"*:80-65535"</span>,<span style="color: #8b2252;">"connect,accept,listen,resolve"</span>;
    <span style="color: #228b22;">permission</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">security</span>.<span style="color: #a0522d;">AllPermission</span>;
};
</pre>


</div>
</div>

</div>

<div id="outline-container-3-14" class="outline-3">
<h3 id="sec-3-14"><span class="section-number-3">3.14</span> Trouble shooting 2</h3>
<div class="outline-text-3" id="text-3-14">


</div>

<div id="outline-container-3-14-1" class="outline-4">
<h4 id="sec-3-14-1"><span class="section-number-4">3.14.1</span> Observation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-14-1">

<p>   When calling the RPC (hence after the lookup), the client ends with:
   <code>java.rmi.ConnectException: Connection refused to host: 127.0.0.1</code>
</p>
</div>

</div>

<div id="outline-container-3-14-2" class="outline-4">
<h4 id="sec-3-14-2"><span class="section-number-4">3.14.2</span> Why? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-14-2">

<p>   In some linux distributions, the name resolution for hostname
   takes 127.0.0.1 from <code>/etc/hosts</code> instead of public IP.
</p>
</div>

</div>

<div id="outline-container-3-14-3" class="outline-4">
<h4 id="sec-3-14-3"><span class="section-number-4">3.14.3</span> Solution &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-14-3">

<p>run the server by overriding its IP
</p>


<pre class="src src-java">java -Djava.rmi.server.hostname=&lt;my ip here&gt; Server 
</pre>


</div>
</div>

</div>

<div id="outline-container-3-15" class="outline-3">
<h3 id="sec-3-15"><span class="section-number-3">3.15</span> Trouble shooting 3</h3>
<div class="outline-text-3" id="text-3-15">


</div>

<div id="outline-container-3-15-1" class="outline-4">
<h4 id="sec-3-15-1"><span class="section-number-4">3.15.1</span> Debugging</h4>
<div class="outline-text-4" id="text-3-15-1">

<p>    In case your server-side implementation crashes due to a programming error,
    you may experience errors when accessing the remote objects.
</p>
</div>

</div>

<div id="outline-container-3-15-2" class="outline-4">
<h4 id="sec-3-15-2"><span class="section-number-4">3.15.2</span> Solution &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-15-2">

<p>   To better spot the error, run the server with logging on:
</p>


<pre class="src src-java">java -Djava.rmi.server.logCalls=<span style="color: #008b8b;">true</span> Server
</pre>

<p>
(add -Djava.security.policy= &hellip; if needed) 
</p></div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Corba</h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> History</h3>
<div class="outline-text-3" id="text-4-1">


</div>

<div id="outline-container-4-1-1" class="outline-4">
<h4 id="sec-4-1-1"><span class="section-number-4">4.1.1</span> Context</h4>
<div class="outline-text-4" id="text-4-1-1">

<ul>
<li>A specification defined by the <i>Object Management Group</i> (OMG), 
     composed of about 1000 members
</li>
<li>currently CORBA 3.0
</li>
<li>Implementors then propose implementations
</li>
</ul>


</div>

</div>

<div id="outline-container-4-1-2" class="outline-4">
<h4 id="sec-4-1-2"><span class="section-number-4">4.1.2</span> Implemenations</h4>
<div class="outline-text-4" id="text-4-1-2">

<p>     Commercial :
</p><ul>
<li>ORBIS, IONA, VisiBroker, ORBacus, &hellip;.
</li>
</ul>

<p>     Open source:
</p><ul>
<li>JDK, MICO, JacORB, TAO, &hellip;
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Sun Implementation</h3>
<div class="outline-text-3" id="text-4-2">


</div>

<div id="outline-container-4-2-1" class="outline-4">
<h4 id="sec-4-2-1"><span class="section-number-4">4.2.1</span> Since 1.3</h4>
<div class="outline-text-4" id="text-4-2-1">

<ul>
<li>JDK provides IDL-to-Java compiler <code>idlj</code>
</li>
</ul>

</div>

</div>

<div id="outline-container-4-2-2" class="outline-4">
<h4 id="sec-4-2-2"><span class="section-number-4">4.2.2</span> Since 1.4</h4>
<div class="outline-text-4" id="text-4-2-2">

<ul>
<li>includes support for the Portable Object Adapter (POA)
</li>
<li>an Object Request Broker Daemon (ORBD) to locate/invoke persistent objects.
</li>
<li><code>servertool</code>  command line to (un)register/startup/shutdown a persistent server
</li>
</ul>


</div>

</div>

<div id="outline-container-4-2-3" class="outline-4">
<h4 id="sec-4-2-3"><span class="section-number-4">4.2.3</span> Imports</h4>
<div class="outline-text-4" id="text-4-2-3">




<pre class="src src-java"><span style="color: #228b22;">impo</span><span style="color: #a020f0;">rt</span> <span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">omg</span>.<span style="color: #008b8b;">CosNaming</span>.*;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">omg</span>.<span style="color: #008b8b;">CosNaming</span>.<span style="color: #008b8b;">NamingContextPackage</span>.*;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">omg</span>.<span style="color: #008b8b;">CORBA</span>.*;
</pre>


</div>
</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Characteristics</h3>
<div class="outline-text-3" id="text-4-3">


<p>
CORBA = Common Object Request Broker Architecture
</p>

</div>

<div id="outline-container-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> A RPC framework</h4>
<div class="outline-text-4" id="text-4-3-1">

<ul>
<li>object oriented
</li>
<li>multiple-OS, multiple languages can be involved
</li>
<li>analogy of the "software bus"  
</li>
</ul>

</div>

</div>

<div id="outline-container-4-3-2" class="outline-4">
<h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span> External Services</h4>
<div class="outline-text-4" id="text-4-3-2">

<ul>
<li>helper services, can connect to the bus
</li>
<li>services: naming, transaction, persistence &hellip;
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> IDL</h3>
<div class="outline-text-3" id="text-4-4">


<p>
   The Interface Definition Language:
   equivalent to the RPC Language.
</p>
<ul>
<li>defines the <b>methods</b> a server proposes 
</li>
<li>defines the <b>data</b> that can be accessed from the client (get/set)
</li>
</ul>


<p>
   From IDL, generation of concrete code to
   represent data and methods in the chosen language.
</p>
</div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> IDL structure</h3>
<div class="outline-text-3" id="text-4-5">


<p>
Three hierarchical elements:
</p><ol>
<li><code>Module</code> : namespaces (correspond to Java packages)
</li>
<li><code>Interface</code> : logical groups of methods
</li>
<li><i>methods</i> : prototypes of the methods implemented by the server
</li>
</ol>


<p>
Example:
</p>


<pre class="src src-idl"><span style="color: #a020f0;">module</span> <span style="color: #008b8b;">HelloApp</span>
{
  <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Hello</span>
  {
  <span style="color: #228b22;">string</span> <span style="color: #0000ff;">sayHello</span>();
  <span style="color: #a020f0;">oneway</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">shutdown</span>();
  };
};
</pre>


</div>

</div>

<div id="outline-container-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> IDL types</h3>
<div class="outline-text-3" id="text-4-6">

<p>Types and number of bytes between parenthesis: 
</p><ul>
<li>boolean ={TRUE,FALSE}
</li>
<li>octet (1)
</li>
<li><i>signed</i> : short (2), long (4), long long (8)
</li>
<li><i>unsigned</i> : unsigned short (2), unsigned long (4), unsigned long long (8)
</li>
<li><i>floats</i> : float (4), double (8), long double (16)
</li>
<li><i>characters</i>: char (1, iso-latin-1), string (var), string&lt;n&gt; (n), wchar (2, unicode), wstring (var of wchar)
</li>
</ul>


</div>

</div>

<div id="outline-container-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> IDL types (array)</h3>
<div class="outline-text-3" id="text-4-7">


</div>

<div id="outline-container-4-7-1" class="outline-4">
<h4 id="sec-4-7-1"><span class="section-number-4">4.7.1</span> Fixed-size arrays</h4>
<div class="outline-text-4" id="text-4-7-1">

<p>general form: <i>type variable [size]+;</i>
</p>


<pre class="src src-C"><span style="color: #228b22;">wchar</span> <span style="color: #a0522d;">text</span>[140]
<span style="color: #228b22;">long</span> matrice [32][16]
</pre>

</div>

</div>

<div id="outline-container-4-7-2" class="outline-4">
<h4 id="sec-4-7-2"><span class="section-number-4">4.7.2</span> Arbitrary-size arrays</h4>
<div class="outline-text-4" id="text-4-7-2">

<p>general form: <i>sequence&lt;type[,max] variable;</i>
</p>


<pre class="src src-C">Sequence&lt;<span style="color: #228b22;">long</span>&gt; myvector;
sequence&lt;<span style="color: #228b22;">long</span>,16&gt; myvector16;
</pre>


</div>
</div>

</div>

<div id="outline-container-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> IDL type mapping to Java</h3>
<div class="outline-text-3" id="text-4-8">


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">IDL</th><th scope="col" class="left">Java</th><th scope="col" class="left"></th><th scope="col" class="left">IDL</th><th scope="col" class="left">Java</th></tr>
</thead>
<tbody>
<tr><td class="left">octet</td><td class="left">byte</td><td class="left"></td><td class="left">unsigned short</td><td class="left">short</td></tr>
<tr><td class="left">short</td><td class="left">short</td><td class="left"></td><td class="left">unsigned long</td><td class="left">int</td></tr>
<tr><td class="left">long</td><td class="left">int</td><td class="left"></td><td class="left">unsigned long long</td><td class="left">long</td></tr>
<tr><td class="left">long long</td><td class="left">long</td><td class="left"></td><td class="left">char</td><td class="left">char</td></tr>
<tr><td class="left">float</td><td class="left">float</td><td class="left"></td><td class="left">wchar</td><td class="left">char</td></tr>
<tr><td class="left">double</td><td class="left">double</td><td class="left"></td><td class="left">string</td><td class="left">String</td></tr>
<tr><td class="left">long double</td><td class="left">N/A</td><td class="left"></td><td class="left">wstring</td><td class="left">String</td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> IDL struct mapping to Java</h3>
<div class="outline-text-3" id="text-4-9">

<p>IDL struct are mapped to Java Class.
</p>


<pre class="src src-java"><span style="color: #228b22;">struct</span> <span style="color: #a0522d;">Message</span> {
  <span style="color: #228b22;">long</span> <span style="color: #a0522d;">cli_id</span>;
  <span style="color: #228b22;">long</span> <span style="color: #a0522d;">msg_id</span>;
  <span style="color: #228b22;">string</span> <span style="color: #a0522d;">msg</span>;
};
</pre>

<p>
Translates to:
</p>


<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">final</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Message</span> <span style="color: #a020f0;">implements</span>
          <span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">omg</span>.<span style="color: #008b8b;">CORBA</span>.<span style="color: #008b8b;">portable</span>.<span style="color: #228b22;">IDLEntity</span>
{
  <span style="color: #a020f0;">public</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cli_id</span> = (<span style="color: #228b22;">int</span>)0;
  <span style="color: #a020f0;">public</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">msg_id</span> = (<span style="color: #228b22;">int</span>)0;
  <span style="color: #a020f0;">public</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">msg</span> = <span style="color: #008b8b;">null</span>;
  <span style="color: #a020f0;">public</span> <span style="color: #0000ff;">Message</span> () {}
}
</pre>

</div>

</div>

<div id="outline-container-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> IDL Methods</h3>
<div class="outline-text-3" id="text-4-10">


</div>

<div id="outline-container-4-10-1" class="outline-4">
<h4 id="sec-4-10-1"><span class="section-number-4">4.10.1</span> General Form &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-10-1">

<p>&lt;return_type&gt; /method_name/([&lt;mode&gt; &lt;type&gt; &lt;parameter_id&gt;]*) [raises [exceptions]+];
</p>
</div>

</div>

<div id="outline-container-4-10-2" class="outline-4">
<h4 id="sec-4-10-2"><span class="section-number-4">4.10.2</span> with:</h4>
<div class="outline-text-4" id="text-4-10-2">

<ul>
<li>mode={in, out, inout} for input, output, and modified parameters (View from the server). 
</li>
<li>type: all primitive or constructed type with typedef (constructed before method call)
</li>
</ul>


<p>
Method names must be unique (no overloading).
</p>
</div>
</div>

</div>

<div id="outline-container-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> IDL Oneway Methods</h3>
<div class="outline-text-3" id="text-4-11">



</div>

<div id="outline-container-4-11-1" class="outline-4">
<h4 id="sec-4-11-1"><span class="section-number-4">4.11.1</span> Normal method call: waits for return and return is guaranteed</h4>
<div class="outline-text-4" id="text-4-11-1">


</div>

</div>

<div id="outline-container-4-11-2" class="outline-4">
<h4 id="sec-4-11-2"><span class="section-number-4">4.11.2</span> Oneway call: no wait, but not guaranteed execution</h4>
<div class="outline-text-4" id="text-4-11-2">

<ul>
<li>no return result (<code>void</code> return type)
</li>
<li>no <code>out</code> or <code>inout</code> parameter
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> IDL Parameter Passing</h3>
<div class="outline-text-3" id="text-4-12">


</div>

<div id="outline-container-4-12-1" class="outline-4">
<h4 id="sec-4-12-1"><span class="section-number-4">4.12.1</span> Reference or Copy &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-12-1">



<p>
    A parameter is passed
</p><ul>
<li>by reference for CORBA Object
</li>
<li>by copy for primitives types (float, long, &hellip;) and constructed types (struct, sequence,&hellip;)
</li>
</ul>


</div>

</div>

<div id="outline-container-4-12-2" class="outline-4">
<h4 id="sec-4-12-2"><span class="section-number-4">4.12.2</span> Observations</h4>
<div class="outline-text-4" id="text-4-12-2">

<ul>
<li><code>in</code> : client provides the value. If modified by the server, not updated on the client.
</li>
<li><code>inout</code> :  client provides the value, updated on the client.
</li>
<li><code>out</code> : the server provides the value, updated on the client.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-13" class="outline-3">
<h3 id="sec-4-13"><span class="section-number-3">4.13</span> CORBA Architecture</h3>
<div class="outline-text-3" id="text-4-13">


<div class="figure">
<p><img src="img/corba_archi.png"  alt="img/corba_archi.png" /></p>
<p>This is the caption for the next figure link (or table)</p>
</div>
</div>

</div>

<div id="outline-container-4-14" class="outline-3">
<h3 id="sec-4-14"><span class="section-number-3">4.14</span> Transient and Persistent Objects</h3>
<div class="outline-text-3" id="text-4-14">

<p>Not to confound with the Persitent Object Service (POS) which allows to store object states on disk, DB,&hellip;
</p>
</div>

<div id="outline-container-4-14-1" class="outline-4">
<h4 id="sec-4-14-1"><span class="section-number-4">4.14.1</span> Transient CORBA object &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-14-1">

<p>It has the same lifetime as the execution of the server process that creates it. When a server terminates, its transient objects disappear with it and any object references held by the client become invalid.
</p>
</div>

</div>

<div id="outline-container-4-14-2" class="outline-4">
<h4 id="sec-4-14-2"><span class="section-number-4">4.14.2</span> Persistent CORBA object &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-14-2">

<p>It lives until it is explicitly destroyed. If a client has a reference to it, that reference can be used even if the object’s server is not running – an ORB daemon, orbd, will start the server when the ORB receives an invocation on the object.
</p></div>
</div>

</div>

<div id="outline-container-4-15" class="outline-3">
<h3 id="sec-4-15"><span class="section-number-3">4.15</span> POA</h3>
<div class="outline-text-3" id="text-4-15">


</div>

<div id="outline-container-4-15-1" class="outline-4">
<h4 id="sec-4-15-1"><span class="section-number-4">4.15.1</span> OA and POA &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-15-1">

<ul>
<li>Object Adapter: 
  mechanism that connects a request using an object reference with the proper code to service that request. 

</li>
<li>Portable Object Adapter: a particular type of object adapter that is 
  defined by the CORBA specification. 
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-16" class="outline-3">
<h3 id="sec-4-16"><span class="section-number-3">4.16</span> POA and Servants</h3>
<div class="outline-text-3" id="text-4-16">

<ul>
<li>A servant is the logical process that executes an object.
</li>
<li>It may be mapped to one or several threads, processes, &hellip;
</li>
</ul>

<p><img src="./img/POA.png" width="200" alt="./img/POA.png" />
</p>
</div>

</div>

<div id="outline-container-4-17" class="outline-3">
<h3 id="sec-4-17"><span class="section-number-3">4.17</span> POA Control in Java (1/3)</h3>
<div class="outline-text-3" id="text-4-17">


</div>

<div id="outline-container-4-17-1" class="outline-4">
<h4 id="sec-4-17-1"><span class="section-number-4">4.17.1</span> The first POA is managed by the ORB, and called RootPOA by convention.</h4>
<div class="outline-text-4" id="text-4-17-1">




<pre class="src src-java"><span style="color: #228b22;">ORB</span> <span style="color: #a0522d;">orb</span> = ORB.init( args, <span style="color: #008b8b;">null</span> );
<span style="color: #228b22;">POA</span> <span style="color: #a0522d;">rootPOA</span> = POAHelper.narrow(
   orb.resolve_initial_references(<span style="color: #8b2252;">"RootPOA"</span>));
</pre>


</div>

</div>

<div id="outline-container-4-17-2" class="outline-4">
<h4 id="sec-4-17-2"><span class="section-number-4">4.17.2</span> “Service” POAs can be forked from the RootPOA (it is not mandatory: you can use</h4>
<div class="outline-text-4" id="text-4-17-2">

<p>the RootPOA)
</p>


<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">Create a POA by passing the Persistent Policy</span>
<span style="color: #228b22;">POA</span> <span style="color: #a0522d;">persistentPOA</span> = rootPOA.create_POA(
      <span style="color: #8b2252;">"childPOA"</span>,<span style="color: #008b8b;">null</span>,persistentPolicy );
</pre>


</div>
</div>

</div>

<div id="outline-container-4-18" class="outline-3">
<h3 id="sec-4-18"><span class="section-number-3">4.18</span> POA Control in Java (2/3)</h3>
<div class="outline-text-3" id="text-4-18">

<ul>
<li>POA Manager
</li>
</ul>

<p>&ndash; Each POA is associated a POAManager object, which starts/stops the POA, and manages the incoming requests
</p>


<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">If not activated, requests will hang</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">because POAManager is in the &#8217;HOLD&#8217; state.</span>
persistentPOA.the_POAManager().activate( );
</pre>



</div>

<div id="outline-container-4-18-1" class="outline-4">
<h4 id="sec-4-18-1"><span class="section-number-4">4.18.1</span> POAManager’s States</h4>
<div class="outline-text-4" id="text-4-18-1">

<ul>
<li>Holding: POAs will queue incoming requests.
</li>
<li>Active: POAs will start processing requests.
</li>
<li>Discarding: POAs will discard incoming requests.
</li>
<li>Inactive: POAs will reject the requests that have not begun executing as well as as any new requests.
</li>
</ul>



</div>
</div>

</div>

<div id="outline-container-4-19" class="outline-3">
<h3 id="sec-4-19"><span class="section-number-3">4.19</span> POA Control in Java (3/3)</h3>
<div class="outline-text-3" id="text-4-19">


</div>

<div id="outline-container-4-19-1" class="outline-4">
<h4 id="sec-4-19-1"><span class="section-number-4">4.19.1</span> Servants</h4>
<div class="outline-text-4" id="text-4-19-1">

<ul>
<li>A servant may be associated
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">create servant and register it with the ORB</span>
<span style="color: #228b22;">OperationImpl</span> <span style="color: #a0522d;">o</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">OperationImpl</span>();
o.setORB(orb);
<span style="color: #b22222;">// </span><span style="color: #b22222;">get object reference from the servant</span>
<span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">omg</span>.<span style="color: #008b8b;">CORBA</span>.<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">ref</span> =
      persistentPOA.servant_to_reference( o );
<span style="color: #228b22;">Operation</span> <span style="color: #a0522d;">href</span> = OperationHelper.narrow(ref);
</pre>


</div>
</div>

</div>

<div id="outline-container-4-20" class="outline-3">
<h3 id="sec-4-20"><span class="section-number-3">4.20</span> POA behavior</h3>
<div class="outline-text-3" id="text-4-20">


</div>

<div id="outline-container-4-20-1" class="outline-4">
<h4 id="sec-4-20-1"><span class="section-number-4">4.20.1</span> Thread policy:</h4>
<div class="outline-text-4" id="text-4-20-1">

<ul>
<li>ORB<sub>CTRL</sub><sub>MODEL</sub> (default): The POA is responsible for assigning requests to threads.
</li>
<li>SINGLE<sub>THREAD</sub><sub>MODEL</sub>: The POA processes requests sequentially
</li>
</ul>


</div>

</div>

<div id="outline-container-4-20-2" class="outline-4">
<h4 id="sec-4-20-2"><span class="section-number-4">4.20.2</span> Lifespan policy:</h4>
<div class="outline-text-4" id="text-4-20-2">

<ul>
<li>TRANSIENT (Default): Objects implemented in the POA cannot outlive the process in 
      which they are first created. Once the POA is deactivated, an OBJECT<sub>NOT</sub><sub>EXIST</sub> exception occurs 
      when attempting to use any object references generated by the POA.
</li>
<li>PERSISTENT Objects implemented in the POA can outlive the process in which they are first created.
</li>
</ul>






</div>
</div>

</div>

<div id="outline-container-4-21" class="outline-3">
<h3 id="sec-4-21"><span class="section-number-3">4.21</span> Example using Java JDK</h3>
<div class="outline-text-3" id="text-4-21">


</div>

<div id="outline-container-4-21-1" class="outline-4">
<h4 id="sec-4-21-1"><span class="section-number-4">4.21.1</span> The Sun JDK (now open-jdk) provides since a long time classes and tools to build CORBA apps.</h4>
<div class="outline-text-4" id="text-4-21-1">

</div>

</div>

<div id="outline-container-4-21-2" class="outline-4">
<h4 id="sec-4-21-2"><span class="section-number-4">4.21.2</span> Tools</h4>
<div class="outline-text-4" id="text-4-21-2">

<p>Some of the tools we will use:
</p><ul>
<li>idlj: a compiler that maps IDL descriptions to Java
</li>
<li>orbd: the Object Request Broker Daemon.
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-4-22" class="outline-3">
<h3 id="sec-4-22"><span class="section-number-3">4.22</span> NamingService (JDK): <code>orbd</code></h3>
<div class="outline-text-3" id="text-4-22">

<p><code>orbd</code> is a name service.
</p><ul>
<li>it allows clients to transparently locate and invoke persistent objects on servers.
</li>
<li>it receives names of persistent objects from the server, and returns a reference which includes its own port (not the one of server).
</li>
<li>it is persistent: if it is restarted, associations are not lost
</li>
</ul>


</div>

</div>

<div id="outline-container-4-23" class="outline-3">
<h3 id="sec-4-23"><span class="section-number-3">4.23</span> Example Outline</h3>
<div class="outline-text-3" id="text-4-23">



</div>

<div id="outline-container-4-23-1" class="outline-4">
<h4 id="sec-4-23-1"><span class="section-number-4">4.23.1</span> POA Model, Transient server &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-23-1">

<p>From an IDL description, we generate (<code>idlj</code>) code for a POA that starts an Operation service as a transient server
</p>
<ul>
<li>The tasks we have to complete:
</li>
<li>Write the IDL description of the service
</li>
<li>Generates the “machinery” files with idlj
</li>
<li>Write the Server code, which
<ul>
<li>creates the object
</li>
<li>registers the object to the POA
</li>
<li>get the NamingContexExt
</li>
<li>registers the object to the NamingService 
</li>
<li>implements the service (application code)
</li>
</ul>

</li>
<li>Write the Client code to test the service
</li>
</ul>

</div>
</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2014-10-08T10:59+0200</p>
<p class="author">Author: Stephane Genaud</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.3f with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
