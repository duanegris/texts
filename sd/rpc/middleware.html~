<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>IMW: Middleware</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="IMW: Middleware"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-10-16 10:19:39 CEST"/>
<meta name="author" content="Stephane Genaud"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/worg.css" />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">IMW: Middleware</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Introduction</a>
<ul>
<li><a href="#sec-1-1">1.1 Technologies for Distributed Systems</a></li>
<li><a href="#sec-1-2">1.2 Technologies change but &hellip; concepts stay</a></li>
<li><a href="#sec-1-3">1.3 Middleware: definition</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1 What is middleware?</a></li>
<li><a href="#sec-1-3-2">1.3.2 Middleware provides inter-machines communication facilities,</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4 A Time-line of technologies</a></li>
<li><a href="#sec-1-5">1.5 Principle Design Choices</a></li>
<li><a href="#sec-1-6">1.6 Abstraction</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1 Abstraction of communication primitives</a></li>
<li><a href="#sec-1-6-2">1.6.2 Abstraction Trade-off</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7 Interoperability</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1 Machine-independent</a></li>
<li><a href="#sec-1-7-2">1.7.2 OS-independent</a></li>
<li><a href="#sec-1-7-3">1.7.3 Language-independent</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8 Versatility</a></li>
</ul>
</li>
<li><a href="#sec-2">2 Sun RPC</a>
<ul>
<li><a href="#sec-2-1">2.1 Background</a></li>
<li><a href="#sec-2-2">2.2 Interoperability</a></li>
<li><a href="#sec-2-3">2.3 RPC service identification</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1 Services are identified by</a></li>
<li><a href="#sec-2-3-2">2.3.2 Example</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4 Service Registration (portmap)</a></li>
<li><a href="#sec-2-5">2.5 Standard RPC services</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1 file <code>/etc/rpc</code></a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6 Running Services</a></li>
<li><a href="#sec-2-7">2.7 Programming with ONC RPC</a>
<ul>
<li><a href="#sec-2-7-1">2.7.1 The <b>higher</b> layer: small set of functions to describe and call services in a simple way.</a></li>
<li><a href="#sec-2-7-2">2.7.2 The <b>lower</b> layer: 20+ functions to fine tune the calls.</a></li>
</ul>
</li>
<li><a href="#sec-2-8">2.8 Server-side steps</a>
<ul>
<li><a href="#sec-2-8-1">2.8.1 The primtives are</a></li>
</ul>
</li>
<li><a href="#sec-2-9">2.9 Client-side steps</a></li>
<li><a href="#sec-2-10">2.10 Example of high-layer usage (server side 1/2)</a></li>
<li><a href="#sec-2-11">2.11 Example of high-layer usage (server side 2/2)</a></li>
<li><a href="#sec-2-12">2.12 Example of high-layer usage (client side 1/2)</a></li>
<li><a href="#sec-2-13">2.13 Another way: <code>rpcgen</code></a></li>
<li><a href="#sec-2-14">2.14 Example with <code>rpcgen</code></a></li>
<li><a href="#sec-2-15">2.15 Example with <code>rpcgen</code> (contd)</a></li>
<li><a href="#sec-2-16">2.16 RPCL in Brief (enumeration, constants &amp; simple)</a>
<ul>
<li><a href="#sec-2-16-1">2.16.1 Enumerations and Constants</a></li>
<li><a href="#sec-2-16-2">2.16.2 Simple Declarations</a></li>
<li><a href="#sec-2-16-3">2.16.3 Added types (bool and string)</a></li>
</ul>
</li>
<li><a href="#sec-2-17">2.17 RPCL in Brief (arrays)</a>
<ul>
<li><a href="#sec-2-17-1">2.17.1 Fixed-length arrays</a></li>
<li><a href="#sec-2-17-2">2.17.2 Variable-length arrays</a></li>
</ul>
</li>
<li><a href="#sec-2-18">2.18 RPCL in brief (typedef)</a>
<ul>
<li><a href="#sec-2-18-1">2.18.1 Type definitions</a></li>
</ul>
</li>
<li><a href="#sec-2-19">2.19 RPCL in Brief (pointers)</a></li>
<li><a href="#sec-2-20">2.20 RPCL in Brief (struct)</a></li>
<li><a href="#sec-2-21">2.21 Tips &amp; Tricks</a>
<ul>
<li><a href="#sec-2-21-1">2.21.1 Linux</a></li>
<li><a href="#sec-2-21-2">2.21.2 MacOSX</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-3">3 Java RMI</a>
<ul>
<li><a href="#sec-3-1">3.1 History</a></li>
<li><a href="#sec-3-2">3.2 RPC in the world of RMI</a></li>
<li><a href="#sec-3-3">3.3 The Remote class</a></li>
<li><a href="#sec-3-4">3.4 The Remote class  and interface</a>
<ul>
<li><a href="#sec-3-4-1">3.4.1 A Remote class must be defined in 2 parts</a></li>
<li><a href="#sec-3-4-2">3.4.2 Interface</a></li>
<li><a href="#sec-3-4-3">3.4.3 Class</a></li>
</ul>
</li>
<li><a href="#sec-3-5">3.5 The Serializable class</a></li>
<li><a href="#sec-3-6">3.6 Registering the services</a>
<ul>
<li><a href="#sec-3-6-1">3.6.1 Characteristics of <code>rmiregistry</code></a></li>
</ul>
</li>
<li><a href="#sec-3-7">3.7 Example 1: Remote object with primitive types</a>
<ul>
<li><a href="#sec-3-7-1">3.7.1 The different pieces of code</a></li>
</ul>
</li>
<li><a href="#sec-3-8">3.8 Example 1: Service Description</a></li>
<li><a href="#sec-3-9">3.9 Example 1: Service Implementation</a></li>
<li><a href="#sec-3-10">3.10 Example 1: Service Registration</a></li>
<li><a href="#sec-3-11">3.11 Example 1: Client code</a></li>
<li><a href="#sec-3-12">3.12 Trouble shooting 1</a>
<ul>
<li><a href="#sec-3-12-1">3.12.1 Observation</a></li>
<li><a href="#sec-3-12-2">3.12.2 Why?</a></li>
<li><a href="#sec-3-12-3">3.12.3 Solution</a></li>
</ul>
</li>
<li><a href="#sec-3-13">3.13 Trouble shooting 2</a>
<ul>
<li><a href="#sec-3-13-1">3.13.1 Observation</a></li>
<li><a href="#sec-3-13-2">3.13.2 Why?</a></li>
<li><a href="#sec-3-13-3">3.13.3 Solution</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">4 Corba</a>
<ul>
<li><a href="#sec-4-1">4.1 History</a>
<ul>
<li><a href="#sec-4-1-1">4.1.1 Context</a></li>
<li><a href="#sec-4-1-2">4.1.2 Implemenations</a></li>
</ul>
</li>
<li><a href="#sec-4-2">4.2 Characteristics</a>
<ul>
<li><a href="#sec-4-2-1">4.2.1 A RPC framework</a></li>
<li><a href="#sec-4-2-2">4.2.2 External Services</a></li>
</ul>
</li>
<li><a href="#sec-4-3">4.3 IDL</a></li>
<li><a href="#sec-4-4">4.4 IDL structure</a></li>
<li><a href="#sec-4-5">4.5 IDL types</a></li>
<li><a href="#sec-4-6">4.6 IDL Methods</a></li>
<li><a href="#sec-4-7">4.7 POA</a>
<ul>
<li><a href="#sec-4-7-1">4.7.1 OA and POA</a></li>
<li><a href="#sec-4-7-2">4.7.2 characteristics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Technologies for Distributed Systems</h3>
<div class="outline-text-3" id="text-1-1">

<ul>
<li>Extremely fast evolution since 1985:
     about a technology every 5 years.<br/>
</li>
<li>Implementations adapt to up-to-date technology<br/>
     e.g If networks go faster, it is possible to convey bigger messages.<br/>
         If the cost of some hardware becomes low, no need to spare it.
</li>
</ul>


</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Technologies change but &hellip; concepts stay</h3>
<div class="outline-text-3" id="text-1-2">

<ul>
<li>Client-server is the central concept:<br/>
      The <b>client</b> can make a request at any time,<br/>
      The <b>server</b> permanently waits for incoming requests
</li>
</ul>

<p><img src="./img/S9_RPC_works.png" width="300" alt="./img/S9_RPC_works.png" />
</p>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Middleware: definition</h3>
<div class="outline-text-3" id="text-1-3">


</div>

<div id="outline-container-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> What is middleware? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-1-3-1">

<ul>
<li>A sofware layer between the OS and the application allowing 
      a set of distributed computers to communicate in a standardized
      way.
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Middleware provides inter-machines communication facilities,</h4>
<div class="outline-text-4" id="text-1-3-2">

<p>    but may also include services, such as authentification services,
    resource directories, distributed file catalogs, &hellip;
</p>
</div>
</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> A Time-line of technologies</h3>
<div class="outline-text-3" id="text-1-4">

<p>  <img src="../img/timeline.png"  alt="../img/timeline.png" />
</p>
</div>

</div>

<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Principle Design Choices</h3>
<div class="outline-text-3" id="text-1-5">

<ul>
<li>Abstraction vs. Performance
</li>
<li>Interoperability
</li>
<li>Versatility
</li>
</ul>

</div>

</div>

<div id="outline-container-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Abstraction</h3>
<div class="outline-text-3" id="text-1-6">


</div>

<div id="outline-container-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Abstraction of communication primitives</h4>
<div class="outline-text-4" id="text-1-6-1">

<ul>
<li>too low level: rapidly obsolete, lower programming productivity
</li>
<li>too high level: difficult to optimize for performance 
</li>
</ul>

</div>

</div>

<div id="outline-container-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> Abstraction Trade-off</h4>
<div class="outline-text-4" id="text-1-6-2">

<ul>
<li>independent from the architecture: execute across
      different systems without <b>source code</b> modification
</li>
<li>Hide details related to communication/synchronization management
      (e.g <code>Remote Procedure Calls</code> more abstract than <code>sockets</code>)
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Interoperability</h3>
<div class="outline-text-3" id="text-1-7">


</div>

<div id="outline-container-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Machine-independent</h4>
<div class="outline-text-4" id="text-1-7-1">

<p>    e.g <a href="http://www.ietf.org/rfc/rfc1057.txt">Sun RPC</a> 
    \vspace{5mm}
</p></div>

</div>

<div id="outline-container-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> OS-independent</h4>
<div class="outline-text-4" id="text-1-7-2">

<p>    e.g <a href="http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html">Java-RMI</a>
    \vspace{5mm}
</p></div>

</div>

<div id="outline-container-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Language-independent</h4>
<div class="outline-text-4" id="text-1-7-3">

<p>    e.g <a href="http://www.corba.org">Corba</a>, <a href="http://www.w3.org/TR/soap/">SOAP</a>
</p></div>
</div>

</div>

<div id="outline-container-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Versatility</h3>
<div class="outline-text-3" id="text-1-8">

<p>   The more general, the more versatile 
</p><ul>
<li>Example 1: SOAP communicates through XML pieces of text 
</li>
<li>\(\Rightarrow\) SOAP toolkits can be found for almost all languages.
</li>
</ul>

<p><img src="../soap-img/soapuser-archi1.png"  alt="../soap-img/soapuser-archi1.png" />
</p>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Sun RPC</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Background</h3>
<div class="outline-text-3" id="text-2-1">

<p>   Sun RPC  (aka RPC ONC (Open Network Computing)) 
</p><ul>
<li>are the original RPC (<a href="http://tools.ietf.org/html/rfc1831">RFC 1831</a>), introduced by Sun in 1988
</li>
<li>motivation: provide a support to inter-machines services
</li>
<li>NFS as first target, NIS, &hellip;.
</li>
<li>is open source software (BSD license since 2009)
</li>
</ul>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Interoperability</h3>
<div class="outline-text-3" id="text-2-2">

<ul>
<li>ONC RPC allow programs on different OS and machines to communicate
</li>
<li>It may be in different languages but C in 99% cases.
</li>
<li>Relies on <a href="http://www.ietf.org/rfc/rfc4506.txt">XDR</a> (eXternal Data Representation)
</li>
</ul>


</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> RPC service identification</h3>
<div class="outline-text-3" id="text-2-3">


</div>

<div id="outline-container-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> Services are identified by &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-3-1">

<ol>
<li>the program name (<code>prog_name</code>)
</li>
<li>the program version (<code>prog_ver</code>)
</li>
<li>the function name
</li>
</ol>

</div>

</div>

<div id="outline-container-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_beamercolorbox">B_beamercolorbox</span></span></h4>
<div class="outline-text-4" id="text-2-3-2">




<pre class="example">program MYPROG {
  version VERSION_ONE {
    void MYPROG_NULL(void) = 0;
    answer MYPROG_MYFUNC(data) = 1;
  } = 1;
} = 0x2000:0001;
</pre>


</div>
</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Service Registration (portmap)</h3>
<div class="outline-text-3" id="text-2-4">

<p> This service must be registered in a directory service generally called <i>portmapper</i> 
</p><ul>
<li>acts as a name server
</li>
<li>converts : &lt;prog<sub>name</sub> + ver + protocol&gt; to &lt;portnumber&gt;
</li>
<li>exact service name depending on sytem/distribution : <code>rpcbind</code> (or sometimes <code>portmap</code>, or <code>rpc.portmap</code>)
</li>
<li>attached to port 111
</li>
</ul>


</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Standard RPC services</h3>
<div class="outline-text-3" id="text-2-5">


</div>

<div id="outline-container-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> file <code>/etc/rpc</code> &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-5-1">




<pre class="example">portmapper  100000  
rstatd      100001  
rusersd     100002  
nfs         100003  
ypserv      100004 
mountd      100005 
ypbind      100007
walld       100008 
</pre>


</div>
</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Running Services &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_ignoreheading">B_ignoreheading</span></span></h3>
<div class="outline-text-3" id="text-2-6">




<pre class="example">  % rpcinfo -p
    program vers proto   port
   100000    2   tcp    111  portmapper
   100000    2   udp    111  portmapper
536870913    1   udp  58764
536870913    1   tcp  65106
</pre>

<p>
 Two last lines are one user program.
</p>




</div>

</div>

<div id="outline-container-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> Programming with ONC RPC</h3>
<div class="outline-text-3" id="text-2-7">

<p>   Two layers:
</p>
</div>

<div id="outline-container-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> The <b>higher</b> layer: small set of functions to describe and call services in a simple way.</h4>
<div class="outline-text-4" id="text-2-7-1">

<ul>
<li>Essential primitives: <code>registerrpc()</code> and <code>callrpc()</code> <br/>
</li>
<li>However, limitations: udp only, no auth, and encoding/decoding by hand.   
</li>
</ul>


</div>

</div>

<div id="outline-container-2-7-2" class="outline-4">
<h4 id="sec-2-7-2"><span class="section-number-4">2.7.2</span> The <b>lower</b> layer: 20+ functions to fine tune the calls.</h4>
<div class="outline-text-4" id="text-2-7-2">

<ul>
<li>Much more complex, used for stressed services, for example 
     to implement asynchronous RPC and authentification.  
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> Server-side steps</h3>
<div class="outline-text-3" id="text-2-8">

<p>   The server must <b>register</b>: asks the local portmap to:
</p><ol>
<li>create a new entry so that clients can be routed 
</li>
<li>associate a service number and the address of the function 
     that implements it, or the address of the <i>dispatcher</i>.
</li>
</ol>


</div>

<div id="outline-container-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> The primtives are</h4>
<div class="outline-text-4" id="text-2-8-1">

<ul>
<li><code>svc_register()</code> and <code>pmap_set()</code> (low level)
</li>
<li><code>rpcregister()</code> (high level)
</li>
<li>on exit, <code>svc_unregister()</code>, <code>pmap_uset()</code>
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> Client-side steps</h3>
<div class="outline-text-3" id="text-2-9">

<p>   The client must initialize (1), lookup in remote portmap to find the service (2),
   then, several calls can be made afterwards (3):
</p><ol>
<li><code>clnt_create()</code> / <code>clnttcp_create()</code> / <code>clntudp_create()</code>,
</li>
<li><code>pmap_getport()</code>
</li>
<li><code>clnt_call()</code>
</li>
</ol>


<p>
   The higher level <code>callrpc()</code> does steps 1, 2 and 3 in a row.
</p>
</div>

</div>

<div id="outline-container-2-10" class="outline-3">
<h3 id="sec-2-10"><span class="section-number-3">2.10</span> Example of high-layer usage (server side 1/2)</h3>
<div class="outline-text-3" id="text-2-10">

<p><i>Define the service on the server:</i>
</p>


<pre class="example">#include &lt;rpc/xdr.h&gt;
#include &lt;rpc/rpc.h&gt;

int* my_function(int *n) {
   static int res;
   *n = *n + 1;
   res= *n; 
   return (&amp;res);
}
</pre>


</div>

</div>

<div id="outline-container-2-11" class="outline-3">
<h3 id="sec-2-11"><span class="section-number-3">2.11</span> Example of high-layer usage (server side 2/2)</h3>
<div class="outline-text-3" id="text-2-11">

<p><i>Register the service on the server:</i>
</p>


<pre class="example">#define PROGNUM 0x20000100                                                      
#define VERSNUM 1                                                               
#define PROCNUM 1

int main (void) {
   registerrpc( PROGNUM,
                VERSNUM,
                PROCNUM,
                my_function, /*ptr to function*/
                (xdrproc_t) xdr_int, /*encode input*/
                (xdrproc_t) xdr_int);/*decode output*/

    svc_run(); /*  server starts listening ... */
}
</pre>


</div>

</div>

<div id="outline-container-2-12" class="outline-3">
<h3 id="sec-2-12"><span class="section-number-3">2.12</span> Example of high-layer usage (client side 1/2)</h3>
<div class="outline-text-3" id="text-2-12">

<p>   <i>Call the service from the client:</i>
</p>


<pre class="example">int main (int argc, char **argv) {
 int n=0x41424344;
 char *host = argv[1];
 int stat;
 stat = callrpc(host,
                PROGNUM,
                VERSNUM,
                PROCNUM,
                (xdrproc_t) xdr_int, //intput encoding
                (char *)&amp;n,          //input param
                (xdrproc_t)xdr_int,  //output decoding
                (char *)&amp;res);       //return of func
}
</pre>


</div>

</div>

<div id="outline-container-2-13" class="outline-3">
<h3 id="sec-2-13"><span class="section-number-3">2.13</span> Another way: <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-13">

<ul>
<li>Taking care of conversion through XDR is difficult
</li>
<li>The <code>rpcgen</code> compiler automates the process of writing RPC applications
</li>
<li><code>rpcgen</code> accepts interface descriptions in <a href="http://docs.oracle.com/cd/E19683-01/816-1435/6m7rrfn9k/index.html">RPCL (RPC Language)</a>
</li>
<li>and generates skeletons programs (C code) 
</li>
</ul>


</div>

</div>

<div id="outline-container-2-14" class="outline-3">
<h3 id="sec-2-14"><span class="section-number-3">2.14</span> Example with <code>rpcgen</code></h3>
<div class="outline-text-3" id="text-2-14">

<ul>
<li>Consider an <i>operation</i> <code>addition</code>, that adds up 2 <code>int</code> s
</li>
<li>Describe this service in a file <code>myservice.x</code> 
</li>
</ul>




<pre class="example">struct data {
  int arg1;  int arg2;
};
typedef struct data data;
struct response {
  int result; unsigned char error;
};
typedef struct response response;

program MYCOMPUTATION {
  version VERSION_ONE{
    void MYCOMPUTATION_NULL(void) = 0;
    response MYCOMPUTATION_ADDITION(data) = 1;
  } = 1;
} = 0x20000001;
</pre>


</div>

</div>

<div id="outline-container-2-15" class="outline-3">
<h3 id="sec-2-15"><span class="section-number-3">2.15</span> Example with <code>rpcgen</code> (contd)</h3>
<div class="outline-text-3" id="text-2-15">

<ul>
<li>Generate the skeletons
</li>
</ul>




<pre class="example">% rpcgen -a myservice.x
</pre>

<ul>
<li>The following files are generated
</li>
</ul>




<pre class="example">myservice.h        /* parameter definitions */
myservice_xdr.c    /* XDR conversion */
myservice_svc.c    /* stubs server */   
myservice_clnt.c   /* stubs client */
myservice_server.c /* server code */
myservice_client.c /* client code */
</pre>




</div>

</div>

<div id="outline-container-2-16" class="outline-3">
<h3 id="sec-2-16"><span class="section-number-3">2.16</span> RPCL in Brief (enumeration, constants &amp; simple)</h3>
<div class="outline-text-3" id="text-2-16">


</div>

<div id="outline-container-2-16-1" class="outline-4">
<h4 id="sec-2-16-1"><span class="section-number-4">2.16.1</span> Enumerations and Constants</h4>
<div class="outline-text-4" id="text-2-16-1">




<pre class="example">enum colortype { RED = 0, GREEN = 1,BLUE = 2  };
const PI = 3.14; 
</pre>

</div>

</div>

<div id="outline-container-2-16-2" class="outline-4">
<h4 id="sec-2-16-2"><span class="section-number-4">2.16.2</span> Simple Declarations</h4>
<div class="outline-text-4" id="text-2-16-2">




<pre class="example">int length;
colortype c;
</pre>

</div>

</div>

<div id="outline-container-2-16-3" class="outline-4">
<h4 id="sec-2-16-3"><span class="section-number-4">2.16.3</span> Added types (bool and string)</h4>
<div class="outline-text-4" id="text-2-16-3">

<ul>
<li><code>bool</code> : boolean, can take TRUE or FALSE values
</li>
<li><code>string</code>: translated to <code>char *</code> (See variable length array).   
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-2-17" class="outline-3">
<h3 id="sec-2-17"><span class="section-number-3">2.17</span> RPCL in Brief (arrays)</h3>
<div class="outline-text-3" id="text-2-17">


</div>

<div id="outline-container-2-17-1" class="outline-4">
<h4 id="sec-2-17-1"><span class="section-number-4">2.17.1</span> Fixed-length arrays</h4>
<div class="outline-text-4" id="text-2-17-1">




<pre class="example">int length[5];
color palette[8];
</pre>


</div>

</div>

<div id="outline-container-2-17-2" class="outline-4">
<h4 id="sec-2-17-2"><span class="section-number-4">2.17.2</span> Variable-length arrays</h4>
<div class="outline-text-4" id="text-2-17-2">

<ul>
<li>The maximum size is specified between angle brackets, or may be ommitted:
</li>
</ul>




<pre class="example">int notes_serie&lt;20&gt;;   # at most 20
int heights&lt;&gt;;         # unlimited
string message&lt;256&gt;;
</pre>

<p>
each will translate to a C struct, e.g:
</p>


<pre class="example">struct {
   u_int heights_len;/* # of items in array */
   int *heights_val; /* pointer to array */
} heights;
</pre>

</div>
</div>

</div>

<div id="outline-container-2-18" class="outline-3">
<h3 id="sec-2-18"><span class="section-number-3">2.18</span> RPCL in brief (typedef)</h3>
<div class="outline-text-3" id="text-2-18">


</div>

<div id="outline-container-2-18-1" class="outline-4">
<h4 id="sec-2-18-1"><span class="section-number-4">2.18.1</span> Type definitions</h4>
<div class="outline-text-4" id="text-2-18-1">

<p>    Same syntax as C typedef
</p>


<pre class="example">typedef string name_t&lt;255&gt;; 
typedef string longstring&lt;&gt;;
</pre>

<p>
will be translated into C code:
</p>


<pre class="example">typedef char *name_t;
typedef char *longstring;
</pre>


</div>
</div>

</div>

<div id="outline-container-2-19" class="outline-3">
<h3 id="sec-2-19"><span class="section-number-3">2.19</span> RPCL in Brief (pointers)</h3>
<div class="outline-text-3" id="text-2-19">

<ul>
<li>Pointer declarations are as in C. Address pointers are not sent over the network. 
     Instead, data pointed to are copied. This is useful for sending recursive data 
     types such as lists and trees. 
</li>
</ul>




<pre class="example">tree_t *t;
</pre>

</div>

</div>

<div id="outline-container-2-20" class="outline-3">
<h3 id="sec-2-20"><span class="section-number-3">2.20</span> RPCL in Brief (struct)</h3>
<div class="outline-text-3" id="text-2-20">

<ul>
<li>Translates as is in C, excepted that an extra typedef is generated.
</li>
</ul>




<pre class="example">struct coord {  int x;  int y;  };                           
</pre>

<p>
Translates to:
</p>


<pre class="example">struct coord {  int x;  int y;  };
typedef struct coord coord;
</pre>

<p>
which allows to use <code>coord</code> instead of <code>struct coord</code>
</p>



</div>

</div>

<div id="outline-container-2-21" class="outline-3">
<h3 id="sec-2-21"><span class="section-number-3">2.21</span> Tips &amp; Tricks</h3>
<div class="outline-text-3" id="text-2-21">


</div>

<div id="outline-container-2-21-1" class="outline-4">
<h4 id="sec-2-21-1"><span class="section-number-4">2.21.1</span> Linux &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-21-1">

<ul>
<li>Install: rpc lib provided by package  <code>libtirpc-dev</code>  (0.2.2-5 on ubuntu 12.04) 
</li>
<li>Run: a portmapper is provided by package <code>rpcbind</code>  
</li>
<li>Run: <code>svc_register()</code> might refuse to register ("credentials problem") 
           \(\Rightarrow\) Start server as root or in sudo mode.
</li>
<li>Initialize array variables before calling remote functions 
     ("Can't encode arguments" error).
</li>
</ul>

</div>

</div>

<div id="outline-container-2-21-2" class="outline-4">
<h4 id="sec-2-21-2"><span class="section-number-4">2.21.2</span> MacOSX &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-2-21-2">

<ul>
<li>Install: the 'Command line tools' element from Xcode in the distrib
              or download it fom  <a href="https://developer.apple.com/downloads/">Apple</a> . 
</li>
<li>Use: <code>rpcgen -C</code> to force generation of ANSI-C code
</li>
</ul>


</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Java RMI</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> History</h3>
<div class="outline-text-3" id="text-3-1">

<ul>
<li>Created by Sun in 1998
</li>
<li>Java only
</li>
<li>Available since JDK &gt;= 1.1
</li>
<li>Since JDK 1.5, stubs are automatically generated (no <code>rmic</code>)
</li>
</ul>

</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> RPC in the world of RMI</h3>
<div class="outline-text-3" id="text-3-2">

<ul>
<li>RMI provides access to <b>objects</b> and their <b>methods</b>
</li>
<li>In contrast to Sun RPC, not only data can be passed
     to remote computations, but also objects that can contain
     code and data.\\[5mm]

</li>
<li>There are 2 ways to communicate in this object-oriented
     paradigm: 
<ol>
<li>through the <code>Remote</code> class
</li>
<li>through the <code>Serializable</code> class
</li>
</ol>

</li>
</ul>



</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> The Remote class</h3>
<div class="outline-text-3" id="text-3-3">


<p>   
   definition: An object of the Remote class can be used remotely.
   It can be used:
</p><ul>
<li>in the address space of the JVM that created it,
</li>
<li>in the address spaces of other JVMs through <i>handles</i> (aka <i>proxies</i>).
</li>
</ul>


<p>   
<img src="../img/proxy.png"  alt="../img/proxy.png" />
The call to a remote object's method is exactly (syntactically) the same as a local one.   
</p>
</div>

</div>

<div id="outline-container-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> The Remote class  and interface</h3>
<div class="outline-text-3" id="text-3-4">



</div>

<div id="outline-container-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> A Remote class must be defined in 2 parts</h4>
<div class="outline-text-4" id="text-3-4-1">

<ul>
<li>an interface
</li>
<li>the class itself
</li>
</ul>

</div>

</div>

<div id="outline-container-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> Interface &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-4-2">




<pre class="example">public interface MyExample extends Remote {...}
</pre>


</div>

</div>

<div id="outline-container-3-4-3" class="outline-4">
<h4 id="sec-3-4-3"><span class="section-number-4">3.4.3</span> Class &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-4-3">




<pre class="example">public class MyExampleImpl 
  extends    UnicastRemoteObject
  implements MyExample  {
    ...
   }
</pre>


</div>
</div>

</div>

<div id="outline-container-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> The Serializable class</h3>
<div class="outline-text-3" id="text-3-5">


<p>
definition: an object of the class Serializable is an object
that can be copied from one address space to another.
</p>

</div>

</div>

<div id="outline-container-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Registering the services</h3>
<div class="outline-text-3" id="text-3-6">

<p>   A process called <b>rmiregistry</b> is in charge of service registration<br/>
   (Equivalent of portmapper)
</p>
</div>

<div id="outline-container-3-6-1" class="outline-4">
<h4 id="sec-3-6-1"><span class="section-number-4">3.6.1</span> Characteristics of <code>rmiregistry</code> &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-6-1">

<ul>
<li>runs on the same host as the services
</li>
<li>default port is 1099
</li>
<li>can be started by program
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> Example 1: Remote object with primitive types</h3>
<div class="outline-text-3" id="text-3-7">

<p>Example parameter passing using primitive types (e.g. int, float, ..) or arrays (e.g. String) 
</p><ul>
<li>In general, parameters just need to be <b>serializable</b> (java.io.Serializable).
</li>
</ul>


</div>

<div id="outline-container-3-7-1" class="outline-4">
<h4 id="sec-3-7-1"><span class="section-number-4">3.7.1</span> The different pieces of code &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-7-1">

<ul>
<li>The service: description of the function prototype
</li>
<li>The service: the implementation of the service
</li>
<li>The server: a generic code which registers the service
</li>
<li>The client: the code that uses the service
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> Example 1: Service Description</h3>
<div class="outline-text-3" id="text-3-8">


<p>
A service is described by an <b>interface</b>.
</p><ul>
<li>known by the client and the server.
</li>
</ul>





<pre class="example">import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Operation extends Remote {

    public int addition(int a, int b) 
                    throws RemoteException ;
}
</pre>


</div>

</div>

<div id="outline-container-3-9" class="outline-3">
<h3 id="sec-3-9"><span class="section-number-3">3.9</span> Example 1: Service Implementation</h3>
<div class="outline-text-3" id="text-3-9">

<ul>
<li>Only the server <b>implements</b> the service.
</li>
</ul>




<pre class="example">import java.rmi.server.UnicastRemoteObject ;
import java.rmi.RemoteException ;
import java.net.InetAddress.* ;
import java.net.* ;

public class OperationImpl extends UnicastRemoteObject
  implements Operation  {

    public OperationImpl () throws RemoteException {
        super();
    };

    public int addition(int a, int b) 
                    throws RemoteException {
      return( a + b) ;
  }
}
</pre>


</div>

</div>

<div id="outline-container-3-10" class="outline-3">
<h3 id="sec-3-10"><span class="section-number-3">3.10</span> Example 1: Service Registration</h3>
<div class="outline-text-3" id="text-3-10">

<ul>
<li>The first server task is to register the service 
  in the rmiregistry under a name (here <i>Operation</i>)
</li>
</ul>




<pre class="example">import java.rmi.*;
import java.net.*;

public class Serveur {
  public static void main(String [] args) {
    try {
       OperationImpl une_op = new OperationImpl ();
       Naming.rebind("rmi://"+args[0]+"/Operation",une_op) ;
       System.out.println("Serveur pret");
     }
     catch (Exception e) { 
           System.out.println(re) ; 
     }
}
</pre>


</div>

</div>

<div id="outline-container-3-11" class="outline-3">
<h3 id="sec-3-11"><span class="section-number-3">3.11</span> Example 1: Client code</h3>
<div class="outline-text-3" id="text-3-11">

<ul>
<li>gets a reference to the  the service in the registry (proxy)
</li>
<li>call the service using that reference 
</li>
</ul>





<pre class="example">import java.rmi.* ;
import java.net.MalformedURLException ;
import java.io.*;

public class Client {
  public static void main(String [] args) {
    try {
         Operation o = (Operation) 
             Naming.lookup("//"+args[0]+"/Operation");
         System.out.println("Client: 33+45= ?");
         int r = o.addition( 33, 45 );
         System.out.println("33+45="+ r );
     }
     catch (Exception e) { System.out.println(e) ; }
   }
}
</pre>


</div>

</div>

<div id="outline-container-3-12" class="outline-3">
<h3 id="sec-3-12"><span class="section-number-3">3.12</span> Trouble shooting 1</h3>
<div class="outline-text-3" id="text-3-12">


</div>

<div id="outline-container-3-12-1" class="outline-4">
<h4 id="sec-3-12-1"><span class="section-number-4">3.12.1</span> Observation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-12-1">

<p>    The client experiences a <code>connection refused</code> error when 
    contacting the server.
</p>
</div>

</div>

<div id="outline-container-3-12-2" class="outline-4">
<h4 id="sec-3-12-2"><span class="section-number-4">3.12.2</span> Why? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-12-2">

<p>    <code>$JAVA_HOME/lib/security/java.policy</code> is too restrictive wrt sockets
</p></div>

</div>

<div id="outline-container-3-12-3" class="outline-4">
<h4 id="sec-3-12-3"><span class="section-number-4">3.12.3</span> Solution &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-12-3">

<p>   To override the standard, run
</p>


<pre class="example">java -Djava.security.policy=more_perm Server
</pre>

<p>
   where <code>fichier</code> contains, for instance:
</p>


<pre class="example">grant {
    permission java.net.SocketPermission
    "*:80-65535","connect,accept,listen,resolve";
    permission java.security.AllPermission;
};
</pre>


</div>
</div>

</div>

<div id="outline-container-3-13" class="outline-3">
<h3 id="sec-3-13"><span class="section-number-3">3.13</span> Trouble shooting 2</h3>
<div class="outline-text-3" id="text-3-13">


</div>

<div id="outline-container-3-13-1" class="outline-4">
<h4 id="sec-3-13-1"><span class="section-number-4">3.13.1</span> Observation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-1">

<p>   When calling the RPC (hence after the lookup), the client ends with:
   <code>java.rmi.ConnectException: Connection refused to host: 127.0.0.1</code>
</p>
</div>

</div>

<div id="outline-container-3-13-2" class="outline-4">
<h4 id="sec-3-13-2"><span class="section-number-4">3.13.2</span> Why? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-2">

<p>   In some linux distributions, the name resolution for hostname
   takes 127.0.0.1 from <code>/etc/hosts</code> instead of public IP.
</p>
</div>

</div>

<div id="outline-container-3-13-3" class="outline-4">
<h4 id="sec-3-13-3"><span class="section-number-4">3.13.3</span> Solution &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-3-13-3">

<p>run the server by overriding its IP
</p>


<pre class="example">java -Djava.rmi.server.hostname=&lt;my ip here&gt; Server 
</pre>


</div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Corba</h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> History</h3>
<div class="outline-text-3" id="text-4-1">


</div>

<div id="outline-container-4-1-1" class="outline-4">
<h4 id="sec-4-1-1"><span class="section-number-4">4.1.1</span> Context</h4>
<div class="outline-text-4" id="text-4-1-1">

<ul>
<li>A specification defined by the <i>Object Management Group</i> (OMG), 
     composed of about 1000 members
</li>
<li>currently CORBA 3.0
</li>
<li>Implementors then propose implementations
</li>
</ul>


</div>

</div>

<div id="outline-container-4-1-2" class="outline-4">
<h4 id="sec-4-1-2"><span class="section-number-4">4.1.2</span> Implemenations</h4>
<div class="outline-text-4" id="text-4-1-2">

<p>     Commercial :
</p><ul>
<li>ORBIS, IONA, VisiBroker, ORBacus, &hellip;.
</li>
</ul>

<p>     Open source:
</p><ul>
<li>JDK, MICO, JacORB, TAO, &hellip;
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Characteristics</h3>
<div class="outline-text-3" id="text-4-2">


<p>
CORBA = Common Object Request Broker Architecture
</p>

</div>

<div id="outline-container-4-2-1" class="outline-4">
<h4 id="sec-4-2-1"><span class="section-number-4">4.2.1</span> A RPC framework</h4>
<div class="outline-text-4" id="text-4-2-1">

<ul>
<li>object oriented
</li>
<li>multiple-OS, multiple languages can be involved
</li>
<li>analogy of the "software bus"  
</li>
</ul>

</div>

</div>

<div id="outline-container-4-2-2" class="outline-4">
<h4 id="sec-4-2-2"><span class="section-number-4">4.2.2</span> External Services</h4>
<div class="outline-text-4" id="text-4-2-2">

<ul>
<li>helper services, can connect to the bus
</li>
<li>services: naming, transaction, persistence &hellip;
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> IDL</h3>
<div class="outline-text-3" id="text-4-3">


<p>
   The Interface Definition Language:
   equivalent to the RPC Language.
</p>
<ul>
<li>defines the <b>methods</b> a server proposes 
</li>
<li>defines the <b>data</b> that can be accessed from the client (get/set)
</li>
</ul>


<p>
   From IDL, generation of concrete code to
   represent data and methods in the chosen language.
</p>
</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> IDL structure</h3>
<div class="outline-text-3" id="text-4-4">


<p>
Three hierarchical elements:
</p><ol>
<li><code>Module</code> : namespaces (correspond to Java packages)
</li>
<li><code>Interface</code> : logical groups of methods
</li>
<li><i>methods</i> : prototypes of the methods implemented by the server
</li>
</ol>


<p>
Example:
</p>


<pre class="example">module HelloApp
{
  interface Hello
  {
  string sayHello();
  oneway void shutdown();
  };
};
</pre>


</div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> IDL types</h3>
<div class="outline-text-3" id="text-4-5">

<ul>
<li>boolean ={TRUE,FALSE}
</li>
<li>byte (1)
</li>
<li><i>signed</i> : short (2), long (4), long long (8)
</li>
<li><i>unsigned</i> : unsigned short (2), unsigned long (4), unsigned long long (8)
</li>
<li><i>floats</i> : float (4), double (8), long double (16)
</li>
<li><i>characters</i>: char (1, iso-latin-1), string (var), string&lt;n&gt; (n), wchar (2, unicode), wstring (var of wchar)
</li>
</ul>


</div>

</div>

<div id="outline-container-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> IDL Methods</h3>
<div class="outline-text-3" id="text-4-6">


</div>

</div>

<div id="outline-container-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> POA</h3>
<div class="outline-text-3" id="text-4-7">


</div>

<div id="outline-container-4-7-1" class="outline-4">
<h4 id="sec-4-7-1"><span class="section-number-4">4.7.1</span> OA and POA &nbsp;&nbsp;&nbsp;<span class="tag"><span class="B_block">B_block</span></span></h4>
<div class="outline-text-4" id="text-4-7-1">

<ul>
<li>Object Adapter: mechanism that connects a request using an object reference with 
</li>
</ul>

<p>the proper code to service that request. 
</p>
<ul>
<li>Portable Object Adapter: a particular type of object adapter that is 
  defined by the CORBA specification. 
</li>
</ul>


</div>

</div>

<div id="outline-container-4-7-2" class="outline-4">
<h4 id="sec-4-7-2"><span class="section-number-4">4.7.2</span> characteristics</h4>
<div class="outline-text-4" id="text-4-7-2">

<ul>
<li>Enables portability of object implementations between different ORB products
</li>
<li>Provide support for objects with persistent identities
</li>
<li>Provide support for transparent activation of objects
</li>
<li>Allow a single servant to support multiple object identities simultaneously
</li>
</ul>



</div>
</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-10-16 10:19:39 CEST</p>
<p class="author">Author: Stephane Genaud</p>
<p class="creator">Org version 7.8.11 with Emacs version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
